<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>Menu - ChatPoint</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800&display=swap" rel="stylesheet"/>
 
  <style>
    :root {
      --primary: #e63946;
      --primary-dark: #d00000;
      --dark: #1d3557;
      --gray: #457b9d;
      --light: #f1faee;
      --card-bg: rgba(255, 255, 255, 0.94);
      --shadow-sm: 0 6px 20px rgba(0,0,0,0.08);
      --radius: 16px;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family: 'Poppins', sans-serif;
      background: var(--light);
      color: var(--dark);
      min-height: 100vh;
    }
    header {
      background: white;
      padding: 14px 18px;
      position: sticky;
      top: 0;
      z-index: 1000;
      box-shadow: var(--shadow-sm);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .back-btn {
      font-size: 1.9rem;
      background: none;
      border: none;
      color: var(--primary);
      cursor: pointer;
      padding: 8px;
      border-radius: 50%;
    }
    .back-btn:hover { background: rgba(230,57,70,0.1); }
    .page-title {
      font-size: 1.45rem;
      font-weight: 700;
    }
    .cart-bar {
      position: fixed;
      top: 60px;
      left: 0;
      right: 0;
      background: white;
      box-shadow: 0 4px 15px rgba(0,0,0,0.12);
      padding: 12px 18px;
      display: none;
      align-items: center;
      justify-content: space-between;
      z-index: 999;
      border-bottom: 1px solid #eee;
    }
    .cart-bar.visible { display: flex; }
    .cart-info {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--primary);
    }
    .view-cart-btn {
      background: var(--primary);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 12px;
      font-weight: 700;
      cursor: pointer;
    }
    .view-cart-btn:hover { background: var(--primary-dark); }
    main {
      padding: 90px 18px 220px;
    }
    h1.shop-name {
      font-size: 2rem;
      font-weight: 800;
      color: var(--primary);
      margin: 0 0 28px;
      text-align: center;
    }
    .veg-nonveg-filter {
      display: none;
      justify-content: center;
      margin: 0 auto 24px;
      max-width: 380px;
    }
    .veg-nonveg-filter.active { display: flex; }
    .filter-btn {
      flex: 1;
      padding: 14px;
      font-weight: 700;
      font-size: 1.05rem;
      border: none;
      cursor: pointer;
      color: white;
    }
    .filter-btn.veg { background: #2a9d8f; border-radius: 14px 0 0 14px; }
    .filter-btn.nonveg { background: var(--primary); border-radius: 0 14px 14px 0; }
    .filter-btn.active { transform: scale(1.05); box-shadow: 0 0 0 4px rgba(255,255,255,0.4); }
    .items-container {
      display: grid;
      gap: 20px;
    }
    .item-card {
      background: var(--card-bg);
      border-radius: var(--radius);
      overflow: hidden;
      box-shadow: var(--shadow-sm);
      transition: all 0.25s ease;
      display: flex;
      flex-direction: column;
    }
    .item-card:hover {
      transform: translateY(-6px);
      box-shadow: 0 16px 40px rgba(230,57,70,0.18);
    }
    .item-img-container {
      width: 100%;
      height: 160px;
      overflow: hidden;
      background: #f8f9fa;
    }
    .item-img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.4s ease;
    }
    .item-card:hover .item-img {
      transform: scale(1.08);
    }
    .item-details {
      padding: 16px 18px;
      flex: 1;
      display: flex;
      flex-direction: column;
    }
    .item-name {
      font-size: 1.25rem;
      font-weight: 700;
      margin-bottom: 6px;
    }
    .item-price {
      font-size: 1.45rem;
      font-weight: 800;
      color: var(--primary);
      margin: 4px 0 12px;
    }
    .quantity-row {
      display: flex;
      align-items: center;
      gap: 16px;
    }
    .qty-btn {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: rgba(230,57,70,0.08);
      border: none;
      font-size: 1.5rem;
      color: var(--primary);
      cursor: pointer;
      transition: all 0.2s;
    }
    .qty-btn:hover { background: rgba(230,57,70,0.18); }
    .qty-value {
      font-size: 1.35rem;
      font-weight: 700;
      min-width: 40px;
      text-align: center;
    }
    .cart-summary-bar {
      position: fixed;
      bottom: 18px;
      left: 50%;
      transform: translateX(-50%);
      width: 92%;
      max-width: 420px;
      padding: 18px 22px;
      background: linear-gradient(135deg, #ff4b5c, #e63946);
      color: white;
      border-radius: 22px;
      box-shadow: 0 12px 35px rgba(230,57,70,0.4);
      display: none;
      cursor: pointer;
      transition: 0.25s ease;
      animation: popUp 0.35s ease-out;
    }
    .cart-summary-bar.visible { display: block !important; }
    .grand-total-row {
      text-align: center;
      font-size: 1.8rem;
      font-weight: 900;
      letter-spacing: 0.5px;
    }
    @keyframes popUp {
      from { transform: translateX(-50%) translateY(30px); opacity: 0; }
      to { transform: translateX(-50%) translateY(0); opacity: 1; }
    }
    @media (max-width: 480px) {
      .item-img-container { height: 140px; }
    }
  </style>
</head>
<body>
<header>
  <button class="back-btn" onclick="window.location.href='index.html'">←</button>
  <div class="page-title">Menu</div>
  <div></div>
</header>

<div class="cart-bar" id="cartBar">
  <div class="cart-info">
    <strong id="cartCountBar">0</strong> items added
  </div>
  <button class="view-cart-btn" onclick="window.location.href='cart.html'">
    View Cart →
  </button>
</div>

<main>
  <h1 class="shop-name" id="shopName">Loading...</h1>
  <div class="veg-nonveg-filter" id="vegNonVegFilter">
    <button class="filter-btn veg active" onclick="filterItems('veg')">Veg</button>
    <button class="filter-btn nonveg" onclick="filterItems('nonveg')">Non-Veg</button>
  </div>
  <div class="items-container" id="itemsContainer"></div>
</main>

<div class="cart-summary-bar" id="cartSummaryBar" onclick="window.location.href='cart.html'">
  <div class="grand-total-row">
    Total: <span id="grandTotal">₹0</span> →
  </div>
</div>

<script>
// =============================================
// CONFIG - ALL SHOPS & ALL ITEMS (complete, no skipped items)
// =============================================
const DELIVERY_THRESHOLD = 100;
const DELIVERY_FEE = 20;

const shopMenus = {
  "Pizza Spot": [
    { name: "Nuggets", originalPrice: 60 },
    { name: "French Fries", originalPrice: 70 },
    { name: "Photo Fries", originalPrice: 70 },
    { name: "Masala Fries", originalPrice: 70 },
    { name: "Smily Fash", originalPrice: 80 },
    { name: "Pizza Spot (SPL)", originalPrice: 140 },
    { name: "Burger Classic", originalPrice: 60 },
    { name: "Aloo Tikki", originalPrice: 80 },
    { name: "Paneer", originalPrice: 80 },
    { name: "Double Decker", originalPrice: 100 },
    { name: "Pizza Spot (SPL)", originalPrice: 140 },
    { name: "Veg Sandwich", originalPrice: 50 },
    { name: "Cheese", originalPrice: 60 },
    { name: "Sweet Corn", originalPrice: 60 },
    { name: "Mushroom", originalPrice: 60 },
    { name: "Paneer", originalPrice: 60 },
    { name: "Club Sandwich", originalPrice: 70 },
    { name: "Pizza Spot (SPL)", originalPrice: 100 },
    { name: "Pizza Spot (SPL)", originalPrice: 120 },
    { name: "Margarita", originalPrice: 129 },
    { name: "Veggie", originalPrice: 149 },
    { name: "Veg Lover", originalPrice: 249 },
    { name: "Sweet Corn", originalPrice: 219 },
    { name: "Baby Corn", originalPrice: 199 },
    { name: "Tandoori Paneer", originalPrice: 210 },
    { name: "Pizza Spot (SPL)", originalPrice: 299 },
    { name: "Pav Bhaji", originalPrice: 40 },
    { name: "Cheese Pav Bhaji", originalPrice: 60 },
    { name: "Veg Roll", originalPrice: 50 },
    { name: "Sweet Corn Roll", originalPrice: 70 },
    { name: "Paneer Roll", originalPrice: 80 },
    { name: "Steam Momos", originalPrice: 50 },
    { name: "Fried Momos (Fyr)", originalPrice: 60 },
    { name: "Kurkure Momos", originalPrice: 80 }
  ],
  "Dolphin Hotel": [
    { name: "Tomato Soup", originalPrice: 85, type: "veg" },
    { name: "Veg Clear Soup", originalPrice: 85, type: "veg" },
    { name: "Hot and Sour Soup", originalPrice: 100, type: "veg" },
    { name: "Veg Manchow Soup", originalPrice: 110, type: "veg" },
    { name: "Sweet Corn Soup", originalPrice: 110, type: "veg" },
    { name: "Mushroom Soup", originalPrice: 110, type: "veg" },
    { name: "Veg Noodles Soup", originalPrice: 110, type: "veg" },
    { name: "Papad", originalPrice: 25, type: "veg" },
    { name: "Masala Papad", originalPrice: 40, type: "veg" },
    { name: "Finger Chips", originalPrice: 105, type: "veg" },
    { name: "Finger Veg", originalPrice: 110, type: "veg" },
    { name: "Veg Manchurian", originalPrice: 110, type: "veg" },
    { name: "Veg 65", originalPrice: 110, type: "veg" },
    { name: "Kaju Dry", originalPrice: 120, type: "veg" },
    { name: "Gobi 65", originalPrice: 110, type: "veg" },
    { name: "Gobi Manchurian", originalPrice: 110, type: "veg" },
    { name: "Gobi Chilly", originalPrice: 110, type: "veg" },
    { name: "Veg Spring Roll", originalPrice: 210, type: "veg" },
    { name: "Veg Sangli Roll", originalPrice: 110, type: "veg" },
    { name: "Veg Harabara Kabab", originalPrice: 190, type: "veg" },
    { name: "Veg Pakoda", originalPrice: 180, type: "veg" },
    { name: "Onion Pakoda", originalPrice: 110, type: "veg" },
    { name: "Onion Ring Pakoda", originalPrice: 110, type: "veg" },
    { name: "Palak Pakoda", originalPrice: 110, type: "veg" },
    { name: "Veg Kofta", originalPrice: 180, type: "veg" },
    { name: "Veg Hariyali", originalPrice: 190, type: "veg" },
    { name: "Veg Lajawab", originalPrice: 200, type: "veg" },
    { name: "Veg Pahadi Masala", originalPrice: 200, type: "veg" },
    { name: "Mix Veg Masala", originalPrice: 140, type: "veg" },
    { name: "Veg Paper Masala", originalPrice: 180, type: "veg" },
    { name: "Matki Fry", originalPrice: 120, type: "veg" },
    { name: "Malai Kofta", originalPrice: 180, type: "veg" },
    { name: "Baigan Masala", originalPrice: 130, type: "veg" },
    { name: "Aalu Mutter", originalPrice: 130, type: "veg" },
    { name: "Aalu Gobi Masala", originalPrice: 130, type: "veg" },
    { name: "Dum Aalu Kashmiri", originalPrice: 140, type: "veg" },
    { name: "Green Peas Masala", originalPrice: 140, type: "veg" },
    { name: "Capsicum Masala", originalPrice: 130, type: "veg" },
    { name: "Shenga Bhaji", originalPrice: 130, type: "veg" },
    { name: "Methi Masala", originalPrice: 120, type: "veg" },
    { name: "Methi Sukka", originalPrice: 130, type: "veg" },
    { name: "Bhendy Fry", originalPrice: 130, type: "veg" },
    { name: "Bhendy Masala", originalPrice: 130, type: "veg" },
    { name: "Tomato Fry", originalPrice: 120, type: "veg" },
    { name: "Special Gravy", originalPrice: 100, type: "veg" },
    { name: "Dal Fry", originalPrice: 110, type: "veg" },
    { name: "Dal Methi", originalPrice: 110, type: "veg" },
    { name: "Dal Tadka", originalPrice: 110, type: "veg" },
    { name: "Butter Dal", originalPrice: 110, type: "veg" },
    { name: "Dal Palak", originalPrice: 100, type: "veg" },
    { name: "Mung Dal", originalPrice: 120, type: "veg" },
    { name: "Dal Kolapuri", originalPrice: 110, type: "veg" },
    { name: "Dal Makanwala", originalPrice: 110, type: "veg" },
    { name: "CKN Soup", originalPrice: 177, type: "nonveg" },
    { name: "MTN Soup", originalPrice: 177, type: "nonveg" },
    { name: "CKN Lolipop", originalPrice: 207, type: "nonveg" },
    { name: "CKN 65", originalPrice: 227, type: "nonveg" },
    { name: "CKN 65 B-Less", originalPrice: 287, type: "nonveg" },
    { name: "CKN 65 Half", originalPrice: 177, type: "nonveg" },
    { name: "CKN 65 Full", originalPrice: 327, type: "nonveg" },
    { name: "CKN Manchuri", originalPrice: 1027, type: "nonveg" },
    { name: "CKN Manchuri Half", originalPrice: 527, type: "nonveg" },
    { name: "CKN Manchuri Full", originalPrice: 2027, type: "nonveg" },
    { name: "CKN Chilly Half", originalPrice: 177, type: "nonveg" },
    { name: "CKN Chilly Full", originalPrice: 1027, type: "nonveg" },
    { name: "CKN Tikka", originalPrice: 527, type: "nonveg" },
    { name: "CKN Tandoori Half", originalPrice: 527, type: "nonveg" },
    { name: "CKN Tandoori Full", originalPrice: 1027, type: "nonveg" },
    { name: "CKN Kabbab", originalPrice: 277, type: "nonveg" },
    { name: "CKN Masala", originalPrice: 177, type: "nonveg" },
    { name: "CKN Handi Half", originalPrice: 527, type: "nonveg" },
    { name: "CKN Handi Full", originalPrice: 1027, type: "nonveg" },
    { name: "CKN Kolhapuri", originalPrice: 187, type: "nonveg" },
    { name: "CKN Hydrabadi", originalPrice: 187, type: "nonveg" },
    { name: "CKN Hydrabadi Half", originalPrice: 527, type: "nonveg" },
    { name: "CKN Hydrabadi Full", originalPrice: 1027, type: "nonveg" },
    { name: "CKN Sukka", originalPrice: 247, type: "nonveg" },
    { name: "CKN Sukka Half", originalPrice: 627, type: "nonveg" },
    { name: "CKN Sukka Full", originalPrice: 1227, type: "nonveg" },
    { name: "Egg Chilly", originalPrice: 167, type: "nonveg" },
    { name: "Egg Manchuri", originalPrice: 167, type: "nonveg" },
    { name: "Egg Pakoda", originalPrice: 137, type: "nonveg" },
    { name: "Egg 65", originalPrice: 157, type: "nonveg" },
    { name: "Egg Burji", originalPrice: 107, type: "nonveg" },
    { name: "Egg Omlet", originalPrice: 97, type: "nonveg" },
    { name: "Egg Half Fry", originalPrice: 87, type: "nonveg" },
    { name: "Boiled Egg (2 pcs)", originalPrice: 67, type: "nonveg" },
    { name: "Boiled Egg (1 pc)", originalPrice: 47, type: "nonveg" },
    { name: "Egg Masala", originalPrice: 147, type: "nonveg" },
    { name: "Egg Hydrabadi", originalPrice: 157, type: "nonveg" },
    { name: "Egg Makhanwala", originalPrice: 157, type: "nonveg" },
    { name: "Egg Kolhapuri", originalPrice: 167, type: "nonveg" },
    { name: "Egg Maharaja", originalPrice: 177, type: "nonveg" },
    { name: "Egg Kheema", originalPrice: 177, type: "nonveg" },
    { name: "Egg Moglai", originalPrice: 167, type: "nonveg" },
    { name: "Egg DK", originalPrice: 177, type: "nonveg" },
    { name: "Egg Kabbab", originalPrice: 177, type: "nonveg" },
    { name: "Mtn Masala", originalPrice: 247, type: "nonveg" },
    { name: "Mtn Handi Half", originalPrice: 627, type: "nonveg" },
    { name: "Mtn Handi Full", originalPrice: 1227, type: "nonveg" },
    { name: "Mtn Hydrabadi", originalPrice: 247, type: "nonveg" },
    { name: "Mtn Makhanwala", originalPrice: 257, type: "nonveg" },
    { name: "Mtn Kheema", originalPrice: 247, type: "nonveg" },
    { name: "Mtn Kolhapuri", originalPrice: 257, type: "nonveg" },
    { name: "Mtn Maharaja", originalPrice: 267, type: "nonveg" },
    { name: "Mtn Sukka", originalPrice: 257, type: "nonveg" },
    { name: "Mtn Sukka Half", originalPrice: 267, type: "nonveg" },
    { name: "Mtn Sukka Full", originalPrice: 287, type: "nonveg" },
    { name: "Fish Fry", originalPrice: 177, type: "nonveg" },
    { name: "Fish Curry", originalPrice: 187, type: "nonveg" },
    { name: "Egg Fried Rice", originalPrice: 177, type: "nonveg" },
    { name: "Egg Biryani", originalPrice: 187, type: "nonveg" },
    { name: "CKN Biryani", originalPrice: 227, type: "nonveg" },
    { name: "Mutton Biryani", originalPrice: 257, type: "nonveg" }
  ],
  "Mister Chef": [
    { name: "Pizza Margherita", originalPrice: 139 },
    { name: "Veggie Pizza", originalPrice: 149 },
    { name: "Veg Lover", originalPrice: 229 },
    { name: "American Eat", originalPrice: 209 },
    { name: "New York Special", originalPrice: 219 },
    { name: "Paneer Pizza", originalPrice: 199 },
    { name: "Butter Cheese Garlic", originalPrice: 110 },
    { name: "Starters", originalPrice: 100 },
    { name: "Cold Horlick", originalPrice: 70 },
    { name: "Cold Coffee", originalPrice: 70 },
    { name: "Ice Badam", originalPrice: 100 },
    { name: "Cashew Dates", originalPrice: 90 },
    { name: "Dry Fruit Shakes", originalPrice: 100 },
    { name: "Butter Garlic Cheese", originalPrice: 110 },
    { name: "Cheese Garlic", originalPrice: 100 },
    { name: "Cold Coffee", originalPrice: 70 },
    { name: "Burger Classic", originalPrice: 60 },
    { name: "Aloo Tikki", originalPrice: 80 },
    { name: "Paneer", originalPrice: 80 },
    { name: "Cheese", originalPrice: 80 },
    { name: "Double Decker", originalPrice: 100 },
    { name: "Nuggets", originalPrice: 60 },
    { name: "Veg Victory", originalPrice: 60 },
    { name: "French Fries", originalPrice: 70 },
    { name: "Masala Fries", originalPrice: 80 },
    { name: "Potato Wedges", originalPrice: 80 },
    { name: "Smily Face", originalPrice: 80 },
    { name: "Veg Sandwich", originalPrice: 50 },
    { name: "Cheese Sandwich", originalPrice: 60 },
    { name: "Sweet Corn Sandwich", originalPrice: 60 },
    { name: "Mushroom Sandwich", originalPrice: 60 },
    { name: "Paneer Sandwich", originalPrice: 60 },
    { name: "Club Sandwich", originalPrice: 70 }
  ],
  "connect with Pizza": [
    { name: "Margarita", originalPrice: 139 },
    { name: "Veggie", originalPrice: 149 },
    { name: "Veg Lover", originalPrice: 229 },
    { name: "Paneer Tikka", originalPrice: 209 },
    { name: "New York Special", originalPrice: 219 },
    { name: "Veg American", originalPrice: 199 },
    { name: "Veg Overload", originalPrice: 229 },
    { name: "Veg Supreme", originalPrice: 249 },
    { name: "Spicy Veg", originalPrice: 289 },
    { name: "Country Feast", originalPrice: 289 },
    { name: "Veggie Paradise", originalPrice: 309 },
    { name: "Peri Peri Paneer", originalPrice: 309 },
    { name: "Tandoori Paneer", originalPrice: 309 },
    { name: "Supreme Veg", originalPrice: 329 },
    { name: "Veg Overloaded", originalPrice: 329 },
    { name: "Fly Special Pizza", originalPrice: 349 },
    { name: "Classic Chicken", originalPrice: 159 },
    { name: "Chicken BBQ", originalPrice: 179 },
    { name: "Chicken Feast", originalPrice: 299 },
    { name: "Double Chicken", originalPrice: 299 },
    { name: "Butter Chicken", originalPrice: 309 },
    { name: "Chicken Tikka", originalPrice: 309 },
    { name: "Chicken Maxicano", originalPrice: 309 },
    { name: "Chicken Malai Tikka", originalPrice: 329 },
    { name: "Peri Peri Chicken", originalPrice: 329 },
    { name: "Tandoori Chicken", originalPrice: 329 },
    { name: "Kadhai Chicken", originalPrice: 329 },
    { name: "Chicken Supreme", originalPrice: 349 },
    { name: "All The Meats", originalPrice: 349 },
    { name: "Special Chicken", originalPrice: 349 },
    { name: "Onion 2pcs + 250ml Coke", originalPrice: 189 },
    { name: "Capsicum + Garlic Bread + 250ml Coke", originalPrice: 199 },
    { name: "2pc Corn + 250ml Coke", originalPrice: 199 },
    { name: "Paneer 2pc + 250ml Coke", originalPrice: 219 },
    { name: "Delight Burger", originalPrice: 75 },
    { name: "BBQ Burger", originalPrice: 89 },
    { name: "Tandoori Burger", originalPrice: 99 },
    { name: "Makhani Burger", originalPrice: 109 },
    { name: "Paneer Tikka Burger", originalPrice: 136 },
    { name: "Chicken Delight Burger", originalPrice: 99 },
    { name: "BBQ Chicken Burger", originalPrice: 109 },
    { name: "Tandoori Chicken Burger", originalPrice: 129 },
    { name: "Chicken Makhani Burger", originalPrice: 135 },
    { name: "Chicken Tikka Burger", originalPrice: 145 },
    { name: "Delight Masala Sandwich", originalPrice: 99 },
    { name: "Tandoori Masala Sandwich", originalPrice: 99 },
    { name: "South Grilled Sandwich", originalPrice: 119 },
    { name: "Spacial Paneer Sandwich", originalPrice: 119 },
    { name: "Delight Chicken Masala Sandwich", originalPrice: 129 },
    { name: "Tandoori Chicken Sandwich", originalPrice: 129 },
    { name: "South Grilled Chicken Sandwich", originalPrice: 149 },
    { name: "Cheese Slice", originalPrice: 20 },
    { name: "Mayonnaise", originalPrice: 20 },
    { name: "Extra Mayon Patty", originalPrice: 30 },
    { name: "Veg Burger Patty", originalPrice: 40 },
    { name: "Non Veg Burger Patty", originalPrice: 40 }
  ],
  "Nandi Grand Hotels": [
    { name: "Shira", originalPrice: 25 },
    { name: "Poori", originalPrice: 60 },
    { name: "Full Meals", originalPrice: 85 },
    { name: "Onion Dosa", originalPrice: 65 },
    { name: "Utappa", originalPrice: 65 },
    { name: "Mysore Bonda", originalPrice: 70 },
    { name: "Mangalore Buns", originalPrice: 75 },
    { name: "Paneer Dosa", originalPrice: 90 },
    { name: "Cheese Dosa", originalPrice: 95 },
    { name: "Chou Chou Bath", originalPrice: 65 }
  ],
  "Sangambar Udupi Hotel": [
    { name: "Plain Dosa", originalPrice: 78 },
    { name: "Masala Dosa", originalPrice: 88 },
    { name: "Benne Dosa", originalPrice: 88 },
    { name: "Benne Masala Dosa", originalPrice: 108 },
    { name: "Mysore Masala Dosa", originalPrice: 108 },
    { name: "Paneer Masala Dosa", originalPrice: 108 },
    { name: "Gobi 65", originalPrice: 128 },
    { name: "Gobi Manchurian", originalPrice: 118 },
    { name: "Mushroom Manchurian", originalPrice: 178 },
    { name: "Paneer Manchurian", originalPrice: 198 },
    { name: "Veg Manchurian", originalPrice: 98 }
  ],
  "Hasanamba Iyengar Bakery": [
    { name: "Rasmalai Cake", originalPrice: 762 - 25 },
    { name: "Irish Coffee Cake", originalPrice: 762 - 25 },
    { name: "Black Forest Cake", originalPrice: 662 - 25 },
    { name: "American Nuts Cake", originalPrice: 762 - 25 },
    { name: "French Vanilla Cake", originalPrice: 712 - 25 },
    { name: "Pineapple Cake", originalPrice: 662 - 25 },
    { name: "Strawberry Cake", originalPrice: 662 - 25 },
    { name: "Death by Chocolate Cake", originalPrice: 712 - 25 },
    { name: "Butterscotch Cake", originalPrice: 662 - 25 },
    { name: "Veg Pizza", originalPrice: 187 - 25 },
    { name: "Margherita", originalPrice: 177 - 25 },
    { name: "Paneer Pizza", originalPrice: 237 - 25 },
    { name: "Golden Corn Pizza", originalPrice: 247 - 25 },
    { name: "Sweet Corn Pizza", originalPrice: 237 - 25 },
    { name: "Baby Corn Pizza", originalPrice: 237 - 25 },
    { name: "Classic Veg Burger", originalPrice: 87 - 25 },
    { name: "Cheese Burger", originalPrice: 97 - 25 },
    { name: "Paneer Tandoori Burger", originalPrice: 97 - 25 },
    { name: "Cheese Sandwich", originalPrice: 87 - 25 },
    { name: "Veg Sandwich", originalPrice: 78 - 25 },
    { name: "Mango Cake", originalPrice: 612 - 25 }
  ]
};

// =============================================
// ITEM IMAGES
// =============================================
const itemImages = {
  "Margarita": "https://thumbs.dreamstime.com/b/hot-melting-cheese-pizza-slice-golden-crust-gooey-texture-close-up-delicious-baked-stretching-slow-motion-warm-413947085.jpg",
  "Veggie": "https://thumbs.dreamstime.com/b/close-up-shot-freshly-baked-pizza-wooden-board-slice-being-lifted-showcasing-stringy-melted-cheese-topped-406606770.jpg",
  "Veg Lover": "https://thumbs.dreamstime.com/b/close-up-four-cheese-pizza-slice-close-up-shot-four-cheese-pizza-perfectly-melted-cheese-stretchy-gooey-ready-327216466.jpg",
  "Tandoori Paneer": "https://thumbs.dreamstime.com/b/generative-illustration-close-up-shot-delicious-pizza-slice-melted-cheese-steam-rising-tempting-appetizing-400069956.jpg",
  "Burger Classic": "https://i0.wp.com/curryandvanilla.com/wp-content/uploads/2018/02/matar-paneer-burger-1b.jpg?resize=715%2C588&ssl=1",
  "Paneer": "https://cdn.prod.website-files.com/64931d2aee18510b47f4bb1f/64ecfeaabcba01b63384e630_a51qss7pr5ecmtp120javht18sah4nyf.jpeg",
  "French Fries": "https://images.unsplash.com/photo-1585109643930-0f5d0c2e8e2c?w=800",
  "Veg Manchurian": "https://indishious.com/_astro/8ab9fbbb-a6c0-4358-9173-f86383ed7dca_Manchurian_Zn0EeK.jpeg",
  "Gobi Manchurian": "https://i.ytimg.com/vi/wjz8MEaWp2Q/maxresdefault.jpg",
  "Veg 65": "https://madhurasrecipe.com/wp-content/uploads/2024/02/Veg-manchurian-dry-Featured.jpg",
  "Masala Dosa": "http://www.redrickshaw.com/cdn/shop/articles/1582305526_1582305520_1582305364_1582305349_1582304487_1582304482_1582297507_1582297420_1582297166_1582297160_Masala_Dosa_1.jpg?v=1582305529",
  "Plain Dosa": "https://i.ytimg.com/vi/F8yz7VJj3I4/sddefault.jpg",
  "Black Forest Cake": "https://www.allrecipes.com/thmb/WkIeZXMl0NxzMLVwvQm9pfYVtPI=/1500x0/filters:no_upscale():max_bytes(150000):strip_icc()/AR-8095-black-forest-cake-beauty-4x3-3df4387fe611404abdce43ab4aca38f5.jpg",
  "default": "https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=800"
};

// =============================================
// UTILITIES
// =============================================
function getDisplayedPrice(original) {
  return original <= 100 ? original + 20 : original + 40;
}

function getShopFromURL() {
  const params = new URLSearchParams(location.search);
  return decodeURIComponent(params.get("shop") || "");
}

function formatPrice(num) {
  return "₹" + Math.round(num);
}

// =============================================
// CART LOGIC
// =============================================
let cart = JSON.parse(localStorage.getItem("chatpoint_cart")) || {};

function saveCart() {
  localStorage.setItem("chatpoint_cart", JSON.stringify(cart));
  updateCartUI();
}

function getCartSubtotal() {
  let total = 0;
  for (const shop in cart) {
    for (const name in cart[shop]) {
      total += cart[shop][name].qty * cart[shop][name].price;
    }
  }
  return total;
}

function updateCartUI() {
  let count = 0;
  for (const shop in cart) {
    for (const item in cart[shop]) {
      count += cart[shop][item].qty;
    }
  }

  const cartCountEl = document.getElementById("cartCountBar");
  if (cartCountEl) cartCountEl.textContent = count;

  const topBar = document.getElementById("cartBar");
  const bottomBar = document.getElementById("cartSummaryBar");

  if (count > 0) {
    if (topBar) topBar.classList.add("visible");
    if (bottomBar) bottomBar.classList.add("visible");
  } else {
    if (topBar) topBar.classList.remove("visible");
    if (bottomBar) bottomBar.classList.remove("visible");
  }

  const subtotal = getCartSubtotal();
  const delivery = subtotal < DELIVERY_THRESHOLD ? DELIVERY_FEE : 0;
  const grand = subtotal + delivery;

  const grandEl = document.getElementById("grandTotal");
  if (grandEl) grandEl.textContent = formatPrice(grand);
}

function changeQty(shop, name, price, delta) {
  if (!cart[shop]) cart[shop] = {};
  if (!cart[shop][name]) cart[shop][name] = { qty: 0, price };

  cart[shop][name].qty = Math.max(0, (cart[shop][name].qty || 0) + delta);

  if (cart[shop][name].qty === 0) delete cart[shop][name];
  if (Object.keys(cart[shop]).length === 0) delete cart[shop];

  saveCart();
  renderMenu();
  updateCartUI();
}

// =============================================
// RENDER MENU - ALL ITEMS SHOWN
// =============================================
let currentFilter = "veg";

function renderMenu() {
  const container = document.getElementById("itemsContainer");
  if (!container) return;

  container.innerHTML = "";

  const shop = getShopFromURL();
  const items = shopMenus[shop] || [];

  const shopNameEl = document.getElementById("shopName");
  if (shopNameEl) {
    shopNameEl.textContent = shop && shopMenus[shop] ? shop : "Shop not found";
  }

  if (items.length === 0) {
    container.innerHTML = `
      <div style="text-align:center; padding:100px 20px; color:#777;">
        <i class="fas fa-utensils" style="font-size:3rem; opacity:0.3;"></i><br>
        No items available
      </div>
    `;
    return;
  }

  items.forEach(item => {
    // Filter only for Dolphin Hotel
    if (shop === "Dolphin Hotel") {
      if (currentFilter === "veg" && item.type === "nonveg") return;
      if (currentFilter === "nonveg" && item.type === "veg") return;
    }

    const price = getDisplayedPrice(item.originalPrice);
    const qty = cart[shop]?.[item.name]?.qty || 0;
    const imgUrl = itemImages[item.name] || itemImages["default"];

    const card = document.createElement("div");
    card.className = "item-card";
    card.innerHTML = `
      <div class="item-img-container">
        <img class="item-img" src="${imgUrl}" alt="${item.name}" loading="lazy">
      </div>
      <div class="item-details">
        <div class="item-name">${item.name}</div>
        <div class="item-price">${formatPrice(price)}</div>
        <div class="quantity-row">
          <button class="qty-btn" onclick="changeQty('${shop.replace(/'/g,"\\'")}', '${item.name.replace(/'/g,"\\'")}', ${price}, -1)">−</button>
          <span class="qty-value">${qty}</span>
          <button class="qty-btn" onclick="changeQty('${shop.replace(/'/g,"\\'")}', '${item.name.replace(/'/g,"\\'")}', ${price}, 1)">+</button>
        </div>
      </div>
    `;
    container.appendChild(card);
  });
}

function filterItems(type) {
  currentFilter = type;
  document.querySelectorAll('.filter-btn').forEach(btn => {
    btn.classList.toggle('active', btn.classList.contains(type));
  });
  renderMenu();
}

// =============================================
// INIT - Runs after page is fully loaded
// =============================================
document.addEventListener("DOMContentLoaded", () => {
  const currentShop = getShopFromURL();
  const filterEl = document.getElementById("vegNonVegFilter");
  if (filterEl) {
    filterEl.classList.toggle("active", currentShop === "Dolphin Hotel");
  }

  renderMenu();
  updateCartUI();
});
</script>
</body>
</html>
