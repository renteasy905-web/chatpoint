<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Items | Chat Point</title>

  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <style>
    :root {
      --bg: #0f0f14;
      --card: rgba(18, 20, 28, 0.75);
      --muted: #9fb3ff;
      --text: #e6eeff;
      --accent: #59FF94;
      --accent-strong: #32E06A;
      --glow: rgba(89,255,148,0.06);
      --radius: 16px;
      --cart-height: 78px;
      --max-width: 1100px;
      --transition: 220ms cubic-bezier(.2,.9,.3,1);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    html,body { height: 100%; }
    body {
      font-family: 'Outfit', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: radial-gradient(800px 400px at 10% 80%, rgba(89,255,148,0.02), transparent 8%),
                  radial-gradient(700px 300px at 85% 20%, rgba(100,200,255,0.015), transparent 8%),
                  var(--bg);
      color: var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      padding-bottom: var(--cart-height);
      overflow-x: hidden;
    }

    .svg-deco {
      position: fixed;
      pointer-events: none;
      z-index: 0;
      opacity: 0.22;
      filter: drop-shadow(0 18px 40px rgba(0,0,0,0.6));
      transform-origin: center;
      will-change: transform, opacity;
      mix-blend-mode: screen;
    }
    @keyframes floatSlow {
      0% { transform: translateY(30vh) rotate(0deg) scale(.95); opacity:.20; }
      50% { transform: translateY(-10vh) rotate(180deg) scale(1.04); opacity:.32; }
      100% { transform: translateY(30vh) rotate(360deg) scale(.95); opacity:.20; }
    }
    .svg-deco.d1 { left: 6%; width: 110px; animation: floatSlow 28s linear infinite; }
    .svg-deco.d2 { left: 24%; width: 84px; animation: floatSlow 22s linear infinite; animation-delay: 3s; opacity:.18 }
    .svg-deco.d3 { right: 10%; width: 140px; animation: floatSlow 30s linear infinite; animation-delay: 6s; opacity:.16 }
    .svg-deco.d4 { left: 68%; width: 98px; animation: floatSlow 24s linear infinite; animation-delay: 2s; opacity:.20 }
    .svg-deco.d5 { right: 30%; width: 74px; animation: floatSlow 26s linear infinite; animation-delay: 8s; opacity:.22 }

    header {
      position: sticky;
      top: 0;
      z-index: 40;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:12px;
      padding:14px 18px;
      width: 100%;
      max-width: var(--max-width);
      margin: 10px auto 0;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.004));
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.03);
      backdrop-filter: blur(6px);
      box-shadow: 0 12px 30px rgba(0,0,0,0.6);
    }
    .brand { display:flex; align-items:center; gap:12px; }
    .back-btn {
      width:44px;height:44px;border-radius:10px;display:grid;place-items:center;
      background: rgba(255,255,255,0.02); color: var(--accent);
      font-size:18px; cursor:pointer; border:1px solid rgba(255,255,255,0.03);
      transition: all var(--transition);
    }
    .back-btn:hover { transform: translateY(-3px); box-shadow: 0 8px 22px rgba(89,255,148,0.06); color: #000; background: linear-gradient(90deg,var(--accent),var(--accent-strong)); }
    .brand .title { font-weight:800; font-size:22px; color:var(--text); }
    .brand .title .chat { background: linear-gradient(90deg, #fff, var(--accent)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }

    .shop-name { font-weight:700; color:var(--accent); font-size:15px; text-align:right; }

    main { max-width: var(--max-width); margin: 18px auto; padding: 18px; position:relative; z-index:5; }
    .login-banner {
      background: linear-gradient(180deg, rgba(89,255,148,0.03), rgba(255,255,255,0.01));
      border:1px solid rgba(89,255,148,0.08);
      color:var(--accent);
      padding:10px 12px;
      border-radius:12px;
      margin-bottom:18px;
      font-weight:700;
      text-align:center;
    }

    .items-grid {
      display:grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap:18px;
      align-items:start;
    }

    .item-card {
      background: var(--card);
      border-radius: var(--radius);
      overflow:hidden;
      border:1px solid rgba(255,255,255,0.03);
      transition: transform var(--transition), box-shadow var(--transition);
      display:flex;
      flex-direction:column;
      min-height: 100%;
    }
    .item-card:hover { transform: translateY(-8px); box-shadow: 0 20px 50px rgba(0,0,0,0.6), 0 0 30px var(--glow); border-color: rgba(89,255,148,0.07); }

    .item-img {
      width:100%; height:190px; object-fit:cover; background:#12121b; display:block;
    }

    .item-info {
      padding:14px;
      display:flex;
      flex-direction:column;
      gap:8px;
      flex:1 1 auto;
    }
    .item-name { font-weight:800; font-size:17px; color:var(--text); }
    .item-desc { color: #a8b8ff; font-size:13px; }
    .item-price { font-weight:900; font-size:18px; color:var(--accent); }

    .quantity {
      margin-top:10px;
      display:flex; gap:10px; align-items:center;
      background: rgba(255,255,255,0.02); padding:8px 10px; border-radius:999px;
      justify-content:center;
    }
    .qbtn {
      width:36px;height:36px;border-radius:50%;border:none;font-weight:800;
      display:grid;place-items:center;cursor:pointer;background:rgba(255,255,255,0.02);
      color:var(--accent); transition: all var(--transition);
    }
    .qbtn:hover { transform: translateY(-3px); background: linear-gradient(90deg,var(--accent),var(--accent-strong)); color:#000; box-shadow: 0 8px 20px rgba(50,224,106,0.12); }
    .qty { min-width:30px;text-align:center;font-weight:900;color:#bfffd6; }

    .cart-bar {
      position: fixed;
      left: 12px; right: 12px; bottom: 12px;
      height: var(--cart-height);
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.003));
      border-radius: 14px;
      padding: 10px 18px;
      display: none;
      align-items:center;
      justify-content:space-between;
      border:1px solid rgba(255,255,255,0.03);
      backdrop-filter: blur(8px);
      z-index: 60;
      max-width: calc(var(--max-width) + 36px);
      margin: 0 auto;
      left: 50%;
      transform: translateX(-50%);
    }
    .cart-info .main { font-weight:900; font-size:16px; color:var(--text); }
    .cart-info .sub { font-size:12px; color:#b9c7d6; margin-top:3px; }
    .checkout-btn {
      background: linear-gradient(90deg, var(--accent), var(--accent-strong));
      color:#021204; font-weight:900; padding:10px 16px; border-radius:10px; border:none; cursor:pointer;
      box-shadow: 0 10px 30px rgba(50,224,106,0.14);
      transition: transform var(--transition), box-shadow var(--transition);
    }
    .checkout-btn:hover { transform: translateY(-3px); box-shadow: 0 18px 44px rgba(50,224,106,0.22); }

    a { color: var(--accent); text-decoration: none; }
    .center { text-align:center; color:#9aaefc; padding:34px; }

    @media (max-width: 980px) {
      .items-grid { grid-template-columns: 1fr 1fr; gap:12px; }
      header { margin: 10px 12px; padding:12px; border-radius:10px; }
      .cart-bar { left: 12px; right: 12px; max-width: none; transform:none; }
    }
    @media (max-width: 620px) {
      .items-grid { grid-template-columns: 1fr; gap:12px; }
      .item-img { height:160px; }
      header { padding:10px; flex-direction:row; gap:8px; }
    }
  </style>
</head>
<body>

  <!-- SVG Decorations -->
  <svg class="svg-deco d1" viewBox="0 0 48 48" aria-hidden><defs><linearGradient id="g1" x1="0" x2="1"><stop offset="0" stop-color="#59FF94"/><stop offset="1" stop-color="#32E06A"/></linearGradient></defs><path d="M6 10c6-6 30-6 36 0v28c-6 6-30 6-36 0z" fill="url(#g1)" opacity="0.9"/></svg>
  <svg class="svg-deco d2" viewBox="0 0 48 48" aria-hidden><defs><linearGradient id="g2"><stop offset="0" stop-color="#59FF94"/><stop offset="1" stop-color="#9FEFBF"/></linearGradient></defs><circle cx="24" cy="22" r="16" fill="url(#g2)" opacity="0.85"/></svg>
  <svg class="svg-deco d3" viewBox="0 0 48 48" aria-hidden><defs><linearGradient id="g3"><stop offset="0" stop-color="#6FEFCD"/><stop offset="1" stop-color="#2ED07E"/></linearGradient></defs><rect x="6" y="8" width="36" height="32" rx="8" fill="url(#g3)" opacity="0.88"/></svg>
  <svg class="svg-deco d4" viewBox="0 0 48 48" aria-hidden><defs><linearGradient id="g4"><stop offset="0" stop-color="#59FF94"/><stop offset="1" stop-color="#32E06A"/></linearGradient></defs><path d="M8 36C20 28 28 28 40 36V12C28 20 20 20 8 12z" fill="url(#g4)" opacity="0.82"/></svg>
  <svg class="svg-deco d5" viewBox="0 0 48 48" aria-hidden><defs><linearGradient id="g5"><stop offset="0" stop-color="#9FEFBF"/><stop offset="1" stop-color="#32E06A"/></linearGradient></defs><path d="M24 6c8 0 14 6 14 14s-6 14-14 14S10 28 10 20 16 6 24 6z" fill="url(#g5)" opacity="0.76"/></svg>

  <header>
    <div class="brand" style="flex:1">
      <button class="back-btn" id="backBtn" title="Back" aria-label="Back"><i class="fas fa-arrow-left"></i></button>
      <div style="margin-left:8px">
        <div class="title"><span class="chat">Chat</span>Point</div>
        <div style="font-size:12px;color:#9fb3ff">Sindagi • Food Delivery</div>
      </div>
    </div>
    <div style="flex:0 0 auto; text-align:right">
      <div class="shop-name" id="shopName">Loading...</div>
    </div>
  </header>

  <main>
    <div id="loginBanner" class="login-banner" style="display:none;">Please <a href="login.html">login</a> to add items to cart.</div>
    <div class="items-grid" id="itemsGrid"></div>
  </main>

  <div class="cart-bar" id="cartBar" role="button" aria-label="Open cart">
    <div class="cart-info">
      <div class="main" id="cartText">0 items · ₹0</div>
      <div class="sub">Tap to view cart</div>
    </div>
    <button class="checkout-btn" id="checkoutBtn">Checkout</button>
  </div>

  <script>
    const USER_KEY = "chatpoint_user";
    const rawUser = localStorage.getItem(USER_KEY);
    let user = null;
    try { user = JSON.parse(rawUser); } catch(e) { user = null; }
    const isLoggedIn = user && user._id;

    if (!isLoggedIn) {
      document.getElementById("loginBanner").style.display = "block";
    }

    const shopData = {
      "7th Wonder (Cake)": [
        { name: "Chocolate Truffle Cake", price: 380 },
        { name: "Red Velvet Cake", price: 400 },
        { name: "Black Forest", price: 350 }
      ],
      "Sangambar Udpi-Hotel": [
        { name: "Tomato Soup", price: 105 },
        { name: "Sweet Corn Soup", price: 95 },
        { name: "Veg Clear Soup", price: 95 },
        { name: "Hot and Sour Soup", price: 105 },
        { name: "Gobi 65", price: 135 },
        { name: "Gobi Manchurian", price: 125 },
        { name: "Mushroom Manchurian", price: 185 },
        { name: "Paneer Manchurian", price: 205 },
        { name: "Veg Manchurian", price: 105 },
        { name: "Plain Dosa", price: 85 },
        { name: "Masala Dosa", price: 95 },
        { name: "Benne Dosa", price: 95 },
        { name: "Benne Masala Dosa", price: 115 },
        { name: "Mysore Masala Dosa", price: 115 },
        { name: "Paneer Masala Dosa", price: 115 }
      ],
      "Nandi Grand Hotels": [
        { name: "Shira", price: 35 },
        { name: "Poori", price: 70 },
        { name: "Full Meals", price: 95 },
        { name: "Onion Dosa", price: 75 },
        { name: "Utappa", price: 75 },
        { name: "Mysore Bonda", price: 75 },
        { name: "Mangalore Buns", price: 75 },
        { name: "Paneer Dosa", price: 80 },
        { name: "Cheese Dosa", price: 75 },
        { name: "Chou Chou Bath", price: 70 }
      ],
      "Pizza spot": [
        { name: "Nuggets", price: 85 },
        { name: "French Fries", price: 95 },
        { name: "Masala Fries", price: 105 },
        { name: "Smiley Fries", price: 105 },
        { name: "Pizza Spot Special", price: 165 },
        { name: "Burger Classic", price: 85 },
        { name: "Aloo Tikki Burger", price: 85 },
        { name: "Paneer Burger", price: 95 },
        { name: "Double Decker Burger", price: 125 },
        { name: "Pizza Spot Special Burger", price: 165 },
        { name: "Margherita", price: 154 },
        { name: "Veggie", price: 174 },
        { name: "Veggie Lover", price: 204 },
        { name: "Sweet Corn", price: 204 },
        { name: "Baby Corn", price: 224 },
        { name: "Tandoori Paneer", price: 235 },
        { name: "Steam Momos", price: 75 },
        { name: "Fried Momos", price: 85 },
        { name: "Kurkure Momos", price: 105 },
        { name: "Veg Sandwich", price: 75 },
        { name: "Cheese Sandwich", price: 85 },
        { name: "Sweet Corn Sandwich", price: 85 },
        { name: "Masala Sandwich", price: 85 },
        { name: "Paneer Tandoori Sandwich", price: 95 },
        { name: "Club Sandwich", price: 125 },
        { name: "Pizza Spot Special Sandwich", price: 145 },
        { name: "Pav Bhaji", price: 65 },
        { name: "Cheese Pav Bhaji", price: 85 },
        { name: "Veg Roll", price: 75 },
        { name: "Sweet Corn Roll", price: 95 },
        { name: "Paneer Roll", price: 105 }
      ],
      "Fly Pizza": [
        { name: "Creamy Alfredo Pasta Veg", price: 199 }
      ],
      "Mister Chef": [
        { name: "Classic Burger", price: 120 },
        { name: "French Fries", price: 99 }
      ],
      "Dolphin Hotel": [
  { name: "Chicken Tandoori", price: 305 },

  { name: "Kantilal Rice", price: 155 },
  { name: "Sizwan Fried Rice", price: 165 },
  { name: "Panner Fried Rice", price: 185 },
  { name: "Mix Raita", price: 105 },
  { name: "Bundhi Raita", price: 105 },
  { name: "Painapal Raita", price: 110 },
  { name: "Veg Raita", price: 105 },

  { name: "Panner Butter Masala", price: 185 },
  { name: "Panner Masala", price: 165 },
  { name: "Panner Tikka Masala", price: 205 },
  { name: "Panner Kadai", price: 165 },
  { name: "Panner Kheema", price: 205 },
  { name: "Panner Kolhapuri", price: 165 },
  { name: "Panner Sai Kurma", price: 205 },
  { name: "Panner Kofta", price: 215 },
  { name: "Panner Hyadrabadi", price: 225 },
  { name: "Panner Guchi", price: 225 },
  { name: "Panner Burji", price: 205 },
  { name: "Palak Panner", price: 165 },
  { name: "Panner Peshwari", price: 205 },
  { name: "Plain Palak", price: 145 },

  { name: "Veg Kadai", price: 175 },
  { name: "Veg Sai Kurma", price: 175 },
  { name: "Veg Dopyaza", price: 175 },
  { name: "Veg Makhanwala", price: 175 },
  { name: "Veg Maharaja", price: 175 },
  { name: "Veg Rangeela", price: 175 },
  { name: "Veg Boona", price: 175 },
  { name: "Veg Tiranga", price: 175 },
  { name: "Veg Dolphin Special", price: 215 },
  { name: "Veg Tawa Masala", price: 175 },
  { name: "Veg Kolhapuri", price: 175 },
  { name: "Veg Patiyala", price: 175 },
  { name: "Veg Jaipuri", price: 175 },
  { name: "Veg Dilruba", price: 175 },
  { name: "Veg NR Kurma", price: 175 },
  { name: "Veg Hyadrabadi", price: 175 },

  { name: "Veg Kofta", price: 205 },
  { name: "Veg Hariyali", price: 215 },
  { name: "Veg Lajawab", price: 225 },
  { name: "Veg Pahadi Masala", price: 225 },
  { name: "Nix Veg", price: 165 },
  { name: "Veg Paper Masala", price: 165 },
  { name: "Matki Fry", price: 145 },
  { name: "Malai Kofta", price: 205 },
  { name: "Baigan Masala", price: 155 },
  { name: "Aalu Mutter", price: 155 },
  { name: "Aalu Gobi Masala", price: 155 },
  { name: "Dum Aalu Kashmiri", price: 165 },
  
  { name: "Green Pice Masala", price: 165 },
  { name: "Capsicum Masala", price: 155 },
  { name: "Shenga Bhaji", price: 155 },
  { name: "Methi Masala", price: 145 },
  { name: "Menthi Sukka", price: 155 },
  { name: "Bhendy Fry", price: 155 },
  { name: "Bhendy Masala", price: 155 },
  { name: "Tomato Fry", price: 145 },
  { name: "Special Gravy", price: 125 },
  { name: "Curd", price: 50 },
  { name: "Shenga Chatni", price: 55 },
  { name: "Garlic Fry", price: 105 },

  { name: "Tandoori Roti", price: 45 },
  { name: "Special Tandoori Roti", price:55 },
  { name: "Butter Roti", price:50 },
  { name: "Butter Kulcha", price:55 },
  { name: "Butter Naan", price:60 },
  { name: "Plane Naan", price:50 },
  { name: "Plane Kulcha", price:50 },
  { name: "Garlic Naan", price:65 },
  { name: "Jawari Roti", price:40 },
  { name: "Chapati", price:39 },
  { name: "Rost Roti", price:40 },
  { name: "Tawa Parota", price:55 },
  { name: "Masala Parota", price:100 },
  { name: "Aalu Parota", price:90 },
  { name: "Aalu Butter Parota", price:110 },

  { name: "Plane Rice Full", price:100 },
  { name: "Plane Rice Half", price:70 },
  { name: "Jeera Rice Full", price:155 },
  { name: "Jeera Rice Half", price:95 },
  { name: "Masala Rice Full", price:95 },
  { name: "Masala Rice Half", price:95 },
  { name: "Steem Rice", price:120 },
  { name: "Ghee Rice", price:120 },
  { name: "Veg Rice", price:120 },
  { name: "Veg Fried Rice", price:165 },
  { name: "Onion Fried Rice", price:165 },
  { name: "Dal Khichadi", price:165 },
  { name: "Palak Rice", price:185 },
  { name: "Veg Biriyani", price:185 },
  { name: "Cord Rice", price:165 },

  { name: "Tomato Soup", price:110 },
  { name: "Veg Clear Soup", price:110 },
  { name: "Hot and Sour Soup", price:110 },
  { name: "Veg Manchow Soup", price:135 },
  { name: "Sweet Corn Soup", price:110 },
  { name: "Mushroom Soup", price:135 },
  { name: "Veg Noodles Soup", price:135 },

  { name: "Papad", price:50 },
  { name: "Masala Papad", price:65 },
  { name: "Finger Chips", price:130 },
  { name: "Finger Veg", price:135 },
  { name: "Veg Manchurian", price:135 },
  { name: "Veg 65", price:135 },
  { name: "Kaju Dry", price:145 },
  { name: "Gobi 65", price:135 },
  { name: "Gobi Manchurian", price:135 },
  { name: "Gobi Chilly", price:135 },
  { name: "Panner Chilly", price:235 },
  { name: "Panner 65", price:215 },
  { name: "Panner Pakoda", price:180 },
  { name: "Panner French", price:235 },
  { name: "Panner Golden", price:235 },
  { name: "Panner Sati", price:305 },
  { name: "Veg Spring Roll", price:135 },
  { name: "Veg Sangli Roll", price:135 },
  { name: "Veg Harabara Kabab", price:215 },
  { name: "Veg Pakoda", price:205 },
  { name: "Onion Pakoda", price:135 },
  { name: "Onion Ring Pakoda", price:135 },
  { name: "Palak Pakoda", price:135 }
],

      // ============ YOUR BAKERY ADDED HERE ============
      "Hassanmba iyyangar bakery ": [
        // Pizzas
        { name: "Veg Pizza", price: 170 },
        { name: "Margherita", price: 150 },
        { name: "Paneer Pizza", price: 220 },
        { name: "Golden Corn Pizza", price: 230 },
        { name: "Sweet Corn Pizza", price: 220 },
        { name: "Baby Corn Pizza", price: 220 },
        // Burgers
        { name: "Classic Veg Burger", price: 70 },
        { name: "Cheese Burger", price: 80 },
        { name: "Paneer Tandoori Burger", price: 80 },
        // Sandwiches & Rolls
        { name: "Cheese Sandwich", price: 70 },
        { name: "Veg Sandwich", price: 60 },
        { name: "Veg Roll", price: 35 },
        { name: "Egg Roll", price: 35 },
        { name: "Cheese Roll", price: 40 },
        // Ice Cakes (per kg)
        { name: "Rasmalai Cake", price: 750 },
        { name: "Irish Coffee Cake", price: 750 },
        { name: "Black Forest Cake", price: 650 },
        { name: "American Nuts Cake", price: 750 },
        { name: "French Vanilla Cake", price: 700 },
        { name: "Pineapple Cake", price: 650 },
        { name: "Strawberry Cake", price: 650 },
        { name: "Death by Chocolate Cake", price: 700 },
        { name: "Butterscotch Cake", price: 650 },
        { name: "Mango Cake", price: 60 }
      ]
      // ================================================
    };

    const urlParams = new URLSearchParams(window.location.search);
    const shopName = decodeURIComponent(urlParams.get("shop") || "");
    const shopItems = shopData[shopName] || [];

    const shopNameEl = document.getElementById("shopName");
    const itemsGrid = document.getElementById("itemsGrid");
    const cartBar = document.getElementById("cartBar");
    const cartText = document.getElementById("cartText");
    const checkoutBtn = document.getElementById("checkoutBtn");
    const backBtn = document.getElementById("backBtn");

    let cart = {};
    try { cart = JSON.parse(localStorage.getItem("chatpoint_cart")) || {}; } catch(e) { cart = {}; }

    function saveCart() {
      localStorage.setItem("chatpoint_cart", JSON.stringify(cart));
      updateCartBar();
    }

    function updateCartBar() {
      let totalItems = 0, totalPrice = 0;
      for (const shop in cart) {
        for (const itemName in cart[shop]) {
          const entry = cart[shop][itemName];
          totalItems += entry.qty;
          totalPrice += entry.qty * entry.price;
        }
      }
      cartText.textContent = `${totalItems} items · ₹${totalPrice}`;
      cartBar.style.display = totalItems > 0 ? "flex" : "none";
    }

    function changeQty(shop, itemName, price, delta) {
      if (!isLoggedIn) { alert("Please login to add items to cart."); return; }
      if (!cart[shop]) cart[shop] = {};
      if (!cart[shop][itemName]) cart[shop][itemName] = { qty: 0, price };
      cart[shop][itemName].qty = Math.max(0, cart[shop][itemName].qty + delta);
      if (cart[shop][itemName].qty === 0) delete cart[shop][itemName];
      if (Object.keys(cart[shop] || {}).length === 0) delete cart[shop];
      saveCart();
      renderItems();
    }

    function openCartPage() {
      if (!isLoggedIn) { alert("Please login to view cart."); window.location.href = "login.html"; return; }
      window.location.href = "cart.html";
    }

    // Image mapping for your bakery items (add real images later in /images folder)
   const imageMap = {
  // === PIZZA & BURGERS ===
  "veg pizza": "Veg-Pizza.jpg",
  "margherita": "Margherita.jpg",
  "paneer pizza": "Tandoori-Paneer.jpg",
  "tandoori paneer": "Tandoori-Paneer.jpg",
  "golden corn pizza": "Sweet-Corn.jpg",
  "sweet corn pizza": "Sweet-Corn.jpg",
  "baby corn pizza": "Baby-Corn.jpg",
  "sweet corn": "Sweet-Corn.jpg",
  "baby corn": "Baby-Corn.jpg",
  "veggie": "Veggie.jpg",
  "veggie lover": "Veggie-Lover.jpg",

  // === BURGERS ===
  "classic veg burger": "Burger-Classic.jpg",
  "aloo tikki burger": "Aloo-Tikki-Burger.jpg",
  "paneer burger": "Paneer-Burger.jpg",
  "paneer tandoori burger": "Paneer-Burger.jpg",
  "double decker burger": "Double-Decker-Burger.jpg",
  "pizza spot special burger": "Pizza-Spot-Special-Burger.jpg",
  "pizza spot special": "Pizza-Spot-Special.jpg",

  // === SANDWICHES & ROLLS ===
  "cheese sandwich": "Cheese-Sandwich.jpg",
  "veg sandwich": "Veg-Sandwich.jpg",
  "sweet corn sandwich": "Sweet-Corn-Sandwich.jpg",
  "masala sandwich": "Masala-Sandwich.jpg",
  "club sandwich": "Club-Sandwich.jpg",
  "paneer tandoori sandwich": "Paneer-Tandoori-Sandwich.jpg",
  "pizza spot special sandwich": "Pizza-Spot-Special-Sandwich.jpg",
  "veg roll": "Veg-Roll.jpg",
  "sweet corn roll": "Sweet-Corn-Roll.jpg",
  "paneer roll": "Paneer-Roll.jpg",

  // === MOMOS ===
  "steam momos": "Steam-Momos.jpg",
  "fried momos": "Fried-Momos.jpg",
  "kurkure momos": "Kurkure-Momos.jpg",

  // === FRIES & SIDES ===
  "french fries": "French-Fries.jpg",
  "masala fries": "Masala-Fries.jpg",
  "smiley fries": "Smiley-Fries.jpg",
  "nuggets": "Nuggets.jpg",

  // === PAV BHAJI ===
  "pav bhaji": "Pav-Bhaji.jpg",
  "cheese pav bhaji": "Cheese-Pav-Bhaji.jpg",

  // === CAKES ===
  "black forest cake": "Black-Forest.jpg",
  "chocolate truffle cake": "Chocolate Truffle Cake.jpg",
  "chocolate-truffle cake": "Chocolate-Truffle-Cake.jpg",
  "death by chocolate cake": "Chocolate Truffle Cake.jpg",
  "red velvet cake": "Red-Velvet-Cake.JPG",

  // === SOUTH INDIAN BREAKFAST ===
  "plain dosa": "Plain-Dosa.JPG",
  "masala dosa": "Masala-Dosa.JPG",
  "benne dosa": "Benne-Dosa.jpg",
  "benne masala dosa": "Benne-Masala-Dosa.jpg",
  "mysore masala dosa": "Mysore-Masala-Dosa.jpg",
  "paneer masala dosa": "Paneer-Masala-Dosa.jpg",
  "onion dosa": "onion-dosa.JPG",
  "paneer dosa": "paneer-dosa.JPG",
  "cheese dosa": "chess-dosa.jpg",
  "idli": "Idli.jpg.jpg",
  "vada": "Vada.JPG",
  "poori": "poori.JPG",
  "mysore bonda": "Mysore-Bonda.jpg",
  "mangalore buns": "mangalore-buns.JPG",
  "utappa": "utappa.JPG",
  "chou chou bath": "chou-chou-bath.JPG",
  "rice bath": "rice-bath.JPG",
  "shira": "shira.JPG",
  "full meals": "full-meals.JPG",

  // === SOUPS ===
  "tomato soup": "Tomato-Soup.jpg",
  "sweet corn soup": "Sweet-Corn-Soup.jpg",
  "hot and sour soup": "Hot-and-Sour-Soup.jpg",
  "veg clear soup": "Veg-Clear-Soup.jpg",

  // === CHINESE / STARTERS ===
  "gobi 65": "Gobi-65.jpg",
  "gobi manchurian": "Gobi-Manchurian.jpg",
  "mushroom manchurian": "Mushroom-Manchurian.jpg",
  "paneer manchurian": "Paneer-Manchurian.jpg",
  "veg manchurian": "Veg-Manchurian.jpg",

  // === GRAVY CURRIES (Note: Spelling is "Panner" in your files) ===
  "panner hyadrabadi": "Panner-Hyadrabadi.jpg",
  "panner kofta": "Panner-Kofta.jpg",
  "panner sai kurma": "Panner-Sai-Kurma.jpg",

  // === PASTA ===
  "creamy alfredo pasta veg": "Creamy-Alfredo-Pasta-Veg.JPG"
};
    function getImagePath(itemName) {
      const key = itemName.toLowerCase();
      return imageMap[key] ? `images/${imageMap[key]}` : `https://via.placeholder.com/600x380/12121b/59FF94?text=${encodeURIComponent(itemName)}`;
    }

    function renderItems() {
      itemsGrid.innerHTML = "";
      if (shopItems.length === 0) {
        itemsGrid.innerHTML = '<div style="grid-column:1/-1;text-align:center;color:#9aaeff;padding:40px;font-size:18px;">No items found for this shop.</div>';
        return;
      }

      shopItems.forEach((item) => {
        const qty = (cart[shopName] && cart[shopName][item.name]) ? cart[shopName][item.name].qty : 0;
        const imgSrc = getImagePath(item.name);

        const card = document.createElement('article');
        card.className = 'item-card';

        const img = document.createElement('img');
        img.className = 'item-img';
        img.alt = item.name;
        img.loading = 'lazy';
        img.src = imgSrc;
        img.onerror = function() { this.src = `https://via.placeholder.com/600x380/12121b/59FF94?text=${encodeURIComponent(item.name)}`; };

        const info = document.createElement('div');
        info.className = 'item-info';

        const title = document.createElement('div');
        title.className = 'item-name';
        title.textContent = item.name;

        const desc = document.createElement('div');
        desc.className = 'item-desc';
        if (item.name.toLowerCase().includes("cake")) {
          desc.textContent = "₹" + item.price + "/kg • Fresh Cream Cake";
        } else {
          desc.textContent = "Fresh • Bakery Special";
        }

        const price = document.createElement('div');
        price.className = 'item-price';
        price.textContent = item.name.toLowerCase().includes("cake") ? `₹${item.price}/kg` : `₹${item.price}`;

        info.appendChild(title);
        info.appendChild(desc);
        info.appendChild(price);

        const controls = document.createElement('div');
        controls.className = 'quantity';

        if (isLoggedIn) {
          const btnMinus = document.createElement('button');
          btnMinus.className = 'qbtn';
          btnMinus.innerHTML = '−';
          btnMinus.onclick = () => changeQty(shopName, item.name, item.price, -1);

          const qtyEl = document.createElement('div');
          qtyEl.className = 'qty';
          qtyEl.textContent = qty;

          const btnPlus = document.createElement('button');
          btnPlus.className = 'qbtn';
          btnPlus.innerHTML = '+';
          btnPlus.onclick = () => changeQty(shopName, item.name, item.price, +1);

          controls.append(btnMinus, qtyEl, btnPlus);
        } else {
          controls.innerHTML = '<div style="color:#ffb18a;font-size:13px;">Login to add</div>';
        }

        info.appendChild(controls);
        card.append(img, info);
        itemsGrid.appendChild(card);
      });
    }

    if (shopName && shopData[shopName]) {
      shopNameEl.textContent = shopName;
      renderItems();
      updateCartBar();
    } else {
      shopNameEl.textContent = "Shop Not Found";
      itemsGrid.innerHTML = '<div style="grid-column:1/-1;text-align:center;color:#ff8a8a;padding:40px;">Invalid shop. <a href="index.html">Go back</a></div>';
    }

    cartBar.addEventListener('click', openCartPage);
    checkoutBtn.addEventListener('click', (e) => { e.stopPropagation(); openCartPage(); });
    backBtn.addEventListener('click', () => history.back());
    updateCartBar();
  </script>
</body>
</html>
