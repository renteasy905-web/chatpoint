<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Items | Chat Point</title>

  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
<style>
/*
  items-styles.css - ULTIMATE BEST VERSION ðŸ¥‡
  A fully polished, accessible, responsive design leveraging modern CSS features (Glassmorphism, advanced shadows).
*/
:root {
  /* --- Colors --- */
  --brand-red: #f12916;         /* Primary / Price */
  --brand-yellow: #f4ff2a;       /* Accent / Checkout */
  --accent-green: #30bc1a;      /* Success/Offer */
  --text-dark: #111827;
  --bg-light: #e6f0fb;           /* Very light background */
  --card-white: #f3cd98;
  --muted-text: #0f1b34;
  --border-light: rgba(14, 19, 26, 0.08);

  /* --- Layout & Shapes --- */
  --radius-xl: 1.5rem;          /* 24px - Large elements */
  --radius-lg: 0.75rem;         /* 12px - Buttons/Tags */
  --max-width: 75rem;           /* 1200px */
  --transition-smooth: 0.28s cubic-bezier(0.2, 0.8, 0.4, 1);

  /* --- Effects --- */
  --shadow-float: 
    0 10px 20px -5px rgba(15, 23, 42, 0.1),
    0 4px 6px -2px rgba(15, 23, 42, 0.05);
  --shadow-active: 0 4px 10px rgba(15, 23, 42, 0.08);

  /* Glassmorphism background for translucent elements */
  --glass-bg: rgba(255, 255, 255, 0.9);
}

/* --- Base & Reset --- */
*, *::before, *::after { box-sizing: border-box; }
html { font-size: 100%; } /* Ensures 1rem = 16px default */
body {
  margin: 0;
  min-height: 100vh;
  font-family: 'Outfit', system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  background-color: var(--bg-light);
  color: var(--text-dark);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
a { color: var(--brand-red); text-decoration: none; }


/* --- HEADER / TOP BAR --- */
header[role="banner"] {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
  padding: 0.875rem 1.25rem; /* 14px 20px */
  background: linear-gradient(135deg, var(--brand-red), #ff6b6b);
  color: var(--card-white);
  /* Impressive bottom curve shape */
  border-bottom-left-radius: var(--radius-xl);
  border-bottom-right-radius: var(--radius-xl);
  box-shadow: var(--shadow-float);
  position: sticky; top: 0; z-index: 60;
}

.brand { display: flex; align-items: center; gap: 0.75rem; }
.back-btn {
  /* Circular, accessible button */
  appearance: none; border: 0; background: transparent; color: inherit;
  width: 2.25rem; height: 2.25rem; border-radius: 50%;
  display: grid; place-items: center; cursor: pointer;
  transition: background-color var(--transition-smooth);
}
.back-btn:hover { background: rgba(255, 255, 255, 0.15); }
.back-btn:focus-visible { outline: 3px solid rgba(255, 255, 255, 0.5); outline-offset: 2px; }

header .title { font-weight: 800; font-size: 1.25rem; line-height: 1.1; letter-spacing: -0.2px; }
header .brand small { font-size: 0.75rem; color: rgba(255, 255, 255, 0.9); }
.shop-name { font-weight: 700; font-size: 0.9375rem; }

/* Decorative svgs (Minimal impact) */
.svg-deco { position: fixed; pointer-events: none; opacity: 0.08; z-index: 1; filter: blur(3px); }
.svg-deco.d1{left:1rem;top:5rem;width:10rem;height:10rem}
.svg-deco.d2{right:1rem;top:12rem;width:8rem;height:8rem}

/* --- LOGIN BANNER (Glassmorphism) --- */
.login-banner {
  max-width: var(--max-width);
  margin: 1.5rem auto;
  padding: 1rem 1.5rem;
  border-radius: var(--radius-xl);
  background: var(--glass-bg);
  backdrop-filter: blur(10px); 
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.4);
  box-shadow: var(--shadow-float);
  color: var(--text-dark);
  font-size: 0.9375rem;
  text-align: center;
  font-weight: 600;
}

main { max-width: var(--max-width); margin: 2rem auto; padding: 0 1rem 7.5rem; } /* 120px */

/* --- ITEMS GRID & CARDS --- */
.items-grid {
  display: grid;
  /* Auto-fit for fluid, responsive columns */
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); 
  gap: 1.5rem;
}

.item-card {
  display: flex;
  flex-direction: column;
  background: var(--card-white);
  border-radius: var(--radius-xl);
  overflow: hidden;
  box-shadow: var(--shadow-float);
  transition: transform var(--transition-smooth), box-shadow var(--transition-smooth);
  border: 1px solid var(--border-light);
}
/* Impressive lift on hover */
.item-card:hover {
  transform: translateY(-0.5rem); 
  box-shadow: 0 1rem 3rem rgba(15, 23, 42, 0.15);
  border-color: rgba(226, 55, 68, 0.2);
}
.item-card:focus-within {
    outline: 4px solid rgba(226, 55, 68, 0.3);
    outline-offset: 4px;
}

.item-img { 
    width: 100%; height: 12.5rem; /* 200px */ 
    object-fit: cover; 
    display: block;
}
.item-img[src^="https://via.placeholder.com"] {
  background: linear-gradient(135deg, #e9ecef, #fbfbfb);
  display: grid; place-items: center;
  color: var(--muted-text); font-size: 1.5rem; font-weight: 700;
}

.item-info { padding: 1rem 1.25rem 1.5rem; display: flex; flex-direction: column; gap: 0.5rem;}
.item-name { font-weight: 800; font-size: 1.125rem; line-height: 1.2; margin: 0; word-break: break-word; }
.item-desc { font-size: 0.875rem; color: var(--muted-text); min-height: 1.5rem;}

.item-price { font-weight: 900; color: var(--brand-red); font-size: 1.5rem; }
.item-price small { font-weight: 600; color: var(--muted-text); margin-left: 0.5rem; font-size: 0.9rem;}

/* Offer tag */
.offer-tag { 
    background: linear-gradient(90deg, var(--accent-green), #48c9b0); 
    color: var(--card-white); 
    padding: 0.3rem 0.6rem; 
    border-radius: var(--radius-lg); 
    font-size: 0.75rem; 
    font-weight: 700; 
    display: inline-block;
}

/* Quantity controls */
.quantity { display: flex; align-items: center; gap: 0.625rem; margin-top: 0.75rem; }
.qbtn {
  min-width: 2.5rem; height: 2.5rem; /* 40px */
  border-radius: var(--radius-lg);
  border: 1px solid var(--border-light);
  background: var(--card-white);
  color: var(--brand-red);
  display: grid; place-items: center; cursor: pointer;
  font-size: 1.25rem; font-weight: 700;
  transition: all var(--transition-smooth);
}
.qbtn:hover { 
    background: var(--brand-red); 
    color: var(--card-white); 
    transform: translateY(-2px); 
    box-shadow: var(--shadow-active);
}
.qbtn:active { transform: scale(0.95); box-shadow: none; }
.qbtn:focus-visible { outline: 3px solid rgba(226, 55, 68, 0.4); outline-offset: 2px; }

.qty { min-width: 2rem; text-align: center; font-weight: 800; font-size: 1rem; }

/* Checkout/Login button */
.checkout-btn {
  background: linear-gradient(45deg, var(--brand-yellow), #ffd688);
  color: var(--text-dark);
  border: none;
  padding: 0.75rem 1.25rem;
  border-radius: var(--radius-lg);
  font-weight: 900;
  cursor: pointer;
  letter-spacing: 0.5px;
  box-shadow: 0 4px 10px rgba(255, 177, 42, 0.3);
  transition: transform var(--transition-smooth), box-shadow var(--transition-smooth);
}
.checkout-btn:hover { 
    transform: translateY(-3px); 
    box-shadow: 0 8px 18px rgba(255, 177, 42, 0.4);
}
.checkout-btn:focus-visible { outline: 3px solid rgba(255, 177, 42, 0.5); outline-offset: 2px; }


/* --- CART BAR (Floating Glass Pill) --- */
.cart-bar {
  position: fixed;
  left: 50%;
  transform: translateX(-50%);
  bottom: 2rem; /* Lifted high for floating effect */
  width: calc(100% - 3rem); 
  max-width: 28rem; /* 450px */
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.75rem;
  padding: 0.875rem 1.25rem;
  border-radius: var(--radius-xl);

  /* Glass Effect */
  background: var(--glass-bg); 
  backdrop-filter: blur(14px); 
  -webkit-backdrop-filter: blur(14px);

  box-shadow: var(--shadow-float);
  border: 1px solid rgba(255, 255, 255, 0.5);
  z-index: 70;
  cursor: pointer;
  transition: transform var(--transition-smooth);
}
.cart-bar:hover {
    transform: translateX(-50%) scale(1.01);
}

.cart-info { display: flex; flex-direction: column; }
.cart-info .main { font-weight: 900; font-size: 1rem; }
.cart-info .sub { font-size: 0.75rem; color: var(--muted-text); }


/* --- MEDIA QUERIES --- */

/* Small Screens (Mobile) */
@media (max-width: 420px) {
  .item-img { height: 10rem; } /* 160px */
  main { padding: 0 0.5rem 6.5rem; }
  header[role="banner"] { border-radius: 0 0 var(--radius-lg) var(--radius-lg); padding: 0.75rem 1rem; }
  .cart-bar { width: calc(100% - 2rem); bottom: 1rem; max-width: none; }
}

/* Large Screens (Desktop/Tablet) */
@media (min-width: 1024px) {
  main { padding: 1.5rem; }
  .items-grid { grid-template-columns: repeat(3, 1fr); gap: 2rem; }
  .item-img { height: 13rem; } /* 208px */
}

/* UTILITIES */
.center { text-align: center; }
.hidden { display: none !important; }

/* End of stylesheet */

</style>
</head>
<body>

  <svg class="svg-deco d1" viewBox="0 0 48 48" aria-hidden><defs><linearGradient id="g1" x1="0" x2="1"><stop offset="0" stop-color="#59FF94"/><stop offset="1" stop-color="#32E06A"/></linearGradient></defs><path d="M6 10c6-6 30-6 36 0v28c-6 6-30 6-36 0z" fill="url(#g1)" opacity="0.9"/></svg>
  <svg class="svg-deco d2" viewBox="0 0 48 48" aria-hidden><defs><linearGradient id="g2"><stop offset="0" stop-color="#59FF94"/><stop offset="1" stop-color="#9FEFBF"/></linearGradient></defs><circle cx="24" cy="22" r="16" fill="url(#g2)" opacity="0.85"/></svg>
  <svg class="svg-deco d3" viewBox="0 0 48 48" aria-hidden><defs><linearGradient id="g3"><stop offset="0" stop-color="#6FEFCD"/><stop offset="1" stop-color="#2ED07E"/></linearGradient></defs><rect x="6" y="8" width="36" height="32" rx="8" fill="url(#g3)" opacity="0.88"/></svg>
  <svg class="svg-deco d4" viewBox="0 0 48 48" aria-hidden><defs><linearGradient id="g4"><stop offset="0" stop-color="#59FF94"/><stop offset="1" stop-color="#32E06A"/></linearGradient></defs><path d="M8 36C20 28 28 28 40 36V12C28 20 20 20 8 12z" fill="url(#g4)" opacity="0.82"/></svg>
  <svg class="svg-deco d5" viewBox="0 0 48 48" aria-hidden><defs><linearGradient id="g5"><stop offset="0" stop-color="#9FEFBF"/><stop offset="1" stop-color="#32E06A"/></linearGradient></defs><path d="M24 6c8 0 14 6 14 14s-6 14-14 14S10 28 10 20 16 6 24 6z" fill="url(#g5)" opacity="0.76"/></svg>

  <header role="banner">
    <div class="brand" style="flex:1">
      <button class="back-btn" id="backBtn" title="Back to Shops" aria-label="Back to Shops"><i class="fas fa-arrow-left"></i></button>
      <div style="margin-left:8px">
        <div class="title"><span class="chat">Chat</span>Point</div>
        <div style="font-size:12px;color:#084b2b">Sindagi â€¢ Food Delivery</div>
      </div>
    </div>
    <div style="flex:0 0 auto; text-align:right">
      <div class="shop-name" id="shopName">Loading...</div>
    </div>
  </header>

  <main>
    <div id="loginBanner" class="login-banner" style="display:none;">Please <a href="login.html">login</a> to add items to cart.</div>
    <section class="items-grid" id="itemsGrid" aria-live="polite"></section>
  </main>

  <div class="cart-bar" id="cartBar" role="button" tabindex="0" aria-label="View cart with current items and total">
    <div class="cart-info">
      <div class="main" id="cartText">0 items Â· â‚¹0</div>
      <div class="sub">Tap to view cart</div>
    </div>
    <button class="checkout-btn" id="checkoutBtn" aria-label="Proceed to Checkout">Checkout</button>
  </div>

  <script>
    const USER_KEY = "chatpoint_user";
    const rawUser = localStorage.getItem(USER_KEY);
    let user = null;
    try { user = JSON.parse(rawUser); } catch(e) { user = null; }
    const isLoggedIn = user && user._id;

    if (!isLoggedIn) {
      document.getElementById("loginBanner").style.display = "block";
    }

    // ====================================================================
    // START: Data Structure (Unchanged logic, maintained all original data)
    // ====================================================================

    const shopData = {
      "Chat Point": [
        { name: " 1) Akoo tikki(burger)+ onion pizza + cheese sandwich + fry momos ", price: 300},
        { name: "2) Veg roll + paneer puff + veg sandwich + Paneer burger + 750ml water bottel", price: 229 },
        { name: "veggiee pizza + French fries + coca cola 250ml ", price: 279 },
        { name: "Jeera rice ", price: 159 },
        { name: "veg biryani + 750ml water botel ", price: 189 },
        { name: "Kantilal rice + 750ml water bottelÂ  ", price: 169 },
      ],
      "7th Wonder (Cake)": [
        { name: "Chocolate Truffle Cake", price: 380 },
        { name: "Red Velvet Cake", price: 400 },
        { name: "Black Forest", price: 350 }
      ],
      "Sangambar Udpi-Hotel": [
        { name: "Tomato Soup", price: 105 },
        { name: "Sweet Corn Soup", price: 95 },
        { name: "Veg Clear Soup", price: 95 },
        { name: "Hot and Sour Soup", price: 105 },
        { name: "Gobi 65", price: 135 },
        { name: "Gobi Manchurian", price: 125 },
        { name: "Mushroom Manchurian", price: 185 },
        { name: "Paneer Manchurian", price: 205 },
        { name: "Veg Manchurian", price: 105 },
        { name: "Plain Dosa", price: 85 },
        { name: "Masala Dosa", price: 95 },
        { name: "Benne Dosa", price: 95 },
        { name: "Benne Masala Dosa", price: 115 },
        { name: "Mysore Masala Dosa", price: 115 },
        { name: "Paneer Masala Dosa", price: 115 }
      ],
      "Nandi Grand Hotels": [
        { name: "Shira", price: 35 },
        { name: "Poori", price: 70 },
        { name: "Full Meals", price: 95 },
        { name: "Onion Dosa", price: 75 },
        { name: "Utappa", price: 75 },
        { name: "Mysore Bonda", price: 75 },
        { name: "Mangalore Buns", price: 75 },
        { name: "Paneer Dosa", price: 80 },
        { name: "Cheese Dosa", price: 75 },
        { name: "Chou Chou Bath", price: 70 }
      ],
      "Pizza spot": [
        { name: "Nuggets", price: 85 },
        { name: "French Fries", price: 95 },
        { name: "Masala Fries", price: 105 },
        { name: "Smiley Fries", price: 105 },
        { name: "Pizza Spot Special", price: 165 },
        { name: "Burger Classic", price: 85 },
        { name: "Aloo Tikki Burger", price: 85 },
        { name: "Paneer Burger", price: 95 },
        { name: "Double Decker Burger", price: 125 },
        { name: "Pizza Spot Special Burger", price: 165 },
        { name: "Margherita", price: 154 },
        { name: "Veggie", price: 174 },
        { name: "Veggie Lover", price: 274 },
        { name: "Sweet Corn", price: 245 },
        { name: "Baby Corn", price: 224 },
        { name: "Tandoori Paneer", price: 235 },
        { name: "Steam Momos", price: 75 },
        { name: "Fried Momos", price: 85 },
        { name: "Kurkure Momos", price: 105 },
        { name: "Veg Sandwich", price: 75 },
        { name: "Cheese Sandwich", price: 85 },
        { name: "Sweet Corn Sandwich", price: 85 },
        { name: "mushroom Sandwich", price: 85 },
        { name: "Paneer Tandoori Sandwich", price: 95 },
        { name: "Club Sandwich", price: 125 },
        { name: "Pizza Spot Special Sandwich", price: 145 },
        { name: "Pav Bhaji", price: 65 },
        { name: "Cheese Pav Bhaji", price: 85 },
        { name: "Veg Roll", price: 75 },
        { name: "Sweet Corn Roll", price: 95 },
        { name: "Paneer Roll", price: 105 }
      ],
      "Fly Pizza": [
        { name: "Margharita pizza ", price: 155 },
        { name: "Corn cheese", price: 179 },
        { name: "Corn cheese big ", price: 339 },
        { name: "paneer Tikka", price: 269 },
        { name: "Veggie lovers", price: 189 },
        { name: "Fly special", price:360 },
      ],
      "Mister Chef": [
        { name: "Classic Burger", price: 120 },
        { name: "French Fries", price: 99 }
      ],
      "Dolphin Hotel": [
        { name: "Chicken Tandoori", price: 305 },
        { name: "Kantilal Rice", price: 155 },
        { name: "Sizwan Fried Rice", price: 165 },
        { name: "Panner Fried Rice", price: 185 },
        { name: "Mix Raita", price: 105 },
        { name: "Bundhi Raita", price: 105 },
        { name: "Painapal Raita", price: 110 },
        { name: "Veg Raita", price: 105 },
        { name: "Panner Butter Masala", price: 185 },
        { name: "Panner Masala", price: 165 },
        { name: "Panner Tikka Masala", price: 205 },
        { name: "Panner Kadai", price: 165 },
        { name: "Panner Kheema", price: 205 },
        { name: "Panner Kolhapuri", price: 165 },
        { name: "Panner Sai Kurma", price: 205 },
        { name: "Panner Kofta", price: 215 },
        { name: "Panner Hyadrabadi", price: 225 },
        { name: "Panner Guchi", price: 225 },
        { name: "Panner Burji", price: 205 },
        { name: "Palak Panner", price: 165 },
        { name: "Panner Peshwari", price: 205 },
        { name: "Plain Palak", price: 145 },
        { name: "Veg Kadai", price: 175 },
        { name: "Veg Sai Kurma", price: 175 },
        { name: "Veg Dopyaza", price: 175 },
        { name: "Veg Makhanwala", price: 175 },
        { name: "Veg Maharaja", price: 175 },
        { name: "Veg Rangeela", price: 175 },
        { name: "Veg Boona", price: 175 },
        { name: "Veg Tiranga", price: 175 },
        { name: "Veg Dolphin Special", price: 215 },
        { name: "Veg Tawa Masala", price: 175 },
        { name: "Veg Kolhapuri", price: 175 },
        { name: "Veg Patiyala", price: 175 },
        { name: "Veg Jaipuri", price: 175 },
        { name: "Veg Dilruba", price: 175 },
        { name: "Veg NR Kurma", price: 175 },
        { name: "Veg Hyadrabadi", price: 175 },
        { name: "Veg Kofta", price: 205 },
        { name: "Veg Hariyali", price: 215 },
        { name: "Veg Lajawab", price: 225 },
        { name: "Veg Pahadi Masala", price: 225 },
        { name: "Nix Veg", price: 165 },
        { name: "Veg Paper Masala", price: 165 },
        { name: "Matki Fry", price: 145 },
        { name: "Malai Kofta", price: 205 },
        { name: "Baigan Masala", price: 155 },
        { name: "Aalu Mutter", price: 155 },
        { name: "Aalu Gobi Masala", price: 155 },
        { name: "Dum Aalu Kashmiri", price: 165 },
        { name: "Green Pice Masala", price: 165 },
        { name: "Capsicum Masala", price: 155 },
        { name: "Shenga Bhaji", price: 155 },
        { name: "Methi Masala", price: 145 },
        { name: "Menthi Sukka", price: 155 },
        { name: "Bhendy Fry", price: 155 },
        { name: "Bhendy Masala", price: 155 },
        { name: "Tomato Fry", price: 145 },
        { name: "Special Gravy", price: 125 },
        { name: "Curd", price: 50 },
        { name: "Shenga Chatni", price: 55 },
        { name: "Garlic Fry", price: 105 },
        { name: "Tandoori Roti", price: 45 },
        { name: "Special Tandoori Roti", price:55 },
        { name: "Butter Roti", price:50 },
        { name: "Butter Kulcha", price:55 },
        { name: "Butter Naan", price:60 },
        { name: "Plane Naan", price:50 },
        { name: "Plane Kulcha", price:50 },
        { name: "Garlic Naan", price:65 },
        { name: "Jawari Roti", price:40 },
        { name: "Chapati", price:39 },
        { name: "Rost Roti", price:40 },
        { name: "Tawa Parota", price:55 },
        { name: "Masala Parota", price:100 },
        { name: "Aalu Parota", price:90 },
        { name: "Aalu Butter Parota", price:110 },
        { name: "Plane Rice Full", price:100 },
        { name: "Plane Rice Half", price:70 },
        { name: "Jeera Rice Full", price:155 },
        { name: "Jeera Rice Half", price:95 },
        { name: "Masala Rice Full", price:95 },
        { name: "Masala Rice Half", price:95 },
        { name: "Steem Rice", price:120 },
        { name: "Ghee Rice", price:120 },
        { name: "Veg Rice", price:120 },
        { name: "Veg Fried Rice", price:165 },
        { name: "Onion Fried Rice", price:165 },
        { name: "Dal Khichadi", price:165 },
        { name: "Palak Rice", price:185 },
        { name: "Veg Biriyani", price:185 },
        { name: "Cord Rice", price:165 },
        { name: "Tomato Soup", price:110 },
        { name: "Veg Clear Soup", price:110 },
        { name: "Hot and Sour Soup", price:110 },
        { name: "Veg Manchow Soup", price:135 },
        { name: "Sweet Corn Soup", price:110 },
        { name: "Mushroom Soup", price:135 },
        { name: "Veg Noodles Soup", price:135 },
        { name: "Papad", price:50 },
        { name: "Masala Papad", price:65 },
        { name: "Finger Chips", price:130 },
        { name: "Finger Veg", price:135 },
        { name: "Veg Manchurian", price:135 },
        { name: "Veg 65", price:135 },
        { name: "Kaju Dry", price:145 },
        { name: "Gobi 65", price:135 },
        { name: "Gobi Manchurian", price:135 },
        { name: "Gobi Chilly", price:135 },
        { name: "Panner Chilly", price:235 },
        { name: "Panner 65", price:215 },
        { name: "Panner Pakoda", price:180 },
        { name: "Panner French", price:235 },
        { name: "Panner Golden", price:235 },
        { name: "Panner Sati", price:305 },
        { name: "Veg Spring Roll", price:135 },
        { name: "Veg Sangli Roll", price:135 },
        { name: "Veg Harabara Kabab", price:215 },
        { name: "Veg Pakoda", price:205 },
        { name: "Onion Pakoda", price:135 },
        { name: "Onion Ring Pakoda", price:135 },
        { name: "Palak Pakoda", price:135 }
      ],
      "Hassanmba iyyangar bakery ": [
        // Pizzas
        { name: "Veg Pizza", price: 175 },
        { name: "Margherita", price: 165 },
        { name: "Paneer Pizza", price: 225 },
        { name: "Golden Corn Pizza", price: 235 },
        { name: "Sweet Corn Pizza", price: 225 },
        { name: "Baby Corn Pizza", price: 225 },
        // Burgers
        { name: "Classic Veg Burger", price: 75 },
        { name: "Cheese Burger", price: 85 },
        { name: "Paneer Tandoori Burger", price: 85 },
        // Sandwiches & Rolls
        { name: "Cheese Sandwich", price: 75 },
        { name: "Veg Sandwich", price: 66 },
        { name: "Veg Roll", price: 35 },
        { name: "Egg Roll", price: 35 },
        { name: "Cheese Roll", price: 40 },
        // Ice Cakes (per kg)
        { name: "Rasmalai Cake", price: 750 },
        { name: "Irish Coffee Cake", price: 750 },
        { name: "Black Forest Cake", price: 650 },
        { name: "American Nuts Cake", price: 750 },
        { name: "French Vanilla Cake", price: 700 },
        { name: "Pineapple Cake", price: 650 },
        { name: "Strawberry Cake", price: 650 },
        { name: "Death by Chocolate Cake", price: 700 },
        { name: "Butterscotch Cake", price: 650 },
        { name: "Mango Cake", price: 600 }
      ]
    };

    // ====================================================================
    // END: Data Structure
    // ====================================================================

    const urlParams = new URLSearchParams(window.location.search);
    const shopName = decodeURIComponent(urlParams.get("shop") || "");
    const shopItems = shopData[shopName] || [];

    const shopNameEl = document.getElementById("shopName");
    const itemsGrid = document.getElementById("itemsGrid");
    const cartBar = document.getElementById("cartBar");
    const cartText = document.getElementById("cartText");
    const checkoutBtn = document.getElementById("checkoutBtn");
    const backBtn = document.getElementById("backBtn");

    let cart = {};
    try { cart = JSON.parse(localStorage.getItem("chatpoint_cart")) || {}; } catch(e) { cart = {}; }

    // ====================================================================
    // START: Cart and Image Logic
    // ====================================================================

    function saveCart() {
      localStorage.setItem("chatpoint_cart", JSON.stringify(cart));
      updateCartBar();
    }

    function updateCartBar() {
      let totalItems = 0, totalPrice = 0;
      for (const shop in cart) {
        for (const itemName in cart[shop]) {
          const entry = cart[shop][itemName];
          totalItems += entry.qty;
          totalPrice += entry.qty * entry.price;
        }
      }
      cartText.textContent = `${totalItems} items Â· â‚¹${totalPrice}`;
      // Use 'flex' for visibility in the dark theme
      cartBar.style.display = totalItems > 0 ? "flex" : "none"; 
    }

    function changeQty(shop, itemName, price, delta) {
      if (!isLoggedIn) { alert("Please login to add items to cart."); return; }
      if (!cart[shop]) cart[shop] = {};
      // Ensure the shop name is correct. If the item is from a different shop, clear the cart.
      if (Object.keys(cart).length > 0 && !cart[shop]) {
        if (!confirm(`Your cart currently contains items from another shop. Do you want to clear your cart and add this item from ${shop}?`)) {
          return;
        }
        cart = {}; // Clear cart
        cart[shop] = {};
        alert(`Cart cleared. Adding ${itemName} from ${shop}.`);
      } else if (!cart[shop]) {
          cart[shop] = {};
      }

      if (!cart[shop][itemName]) cart[shop][itemName] = { qty: 0, price };
      cart[shop][itemName].qty = Math.max(0, cart[shop][itemName].qty + delta);
      if (cart[shop][itemName].qty === 0) delete cart[shop][itemName];
      if (Object.keys(cart[shop] || {}).length === 0) delete cart[shop];
      saveCart();
      renderItems();
    }

    function openCartPage() {
      if (!isLoggedIn) { alert("Please login to view cart."); window.location.href = "login.html"; return; }
      window.location.href = "cart.html";
    }

    // Image mapping for your bakery items (added to the code)
    const imageMap = {
      // === PIZZA & BURGERS ===
      "veg pizza": "Veg-Pizza.jpg",
      "margherita": "Margherita.jpg",
      "paneer pizza": "Tandoori-Paneer.jpg",
      "tandoori paneer": "Tandoori-Paneer.jpg",
      "golden corn pizza": "Sweet-Corn.jpg",
      "sweet corn pizza": "Sweet-Corn.jpg",
      "baby corn pizza": "Baby-Corn.jpg",
      "sweet corn": "Sweet-Corn.jpg",
      "baby corn": "Baby-Corn.jpg",
      "veggie": "Veggie.jpg",
      "veggie lover": "Veggie-Lover.jpg",

      // === BURGERS ===
      "classic veg burger": "Burger-Classic.jpg",
      "aloo tikki burger": "Aloo-Tikki-Burger.jpg",
      "paneer burger": "Paneer-Burger.jpg",
      "paneer tandoori burger": "Paneer-Burger.jpg",
      "double decker burger": "Double-Decker-Burger.jpg",
      "pizza spot special burger": "Pizza-Spot-Special-Burger.jpg",
      "pizza spot special": "Pizza-Spot-Special.jpg",

      // === SANDWICHES & ROLLS ===
      "cheese sandwich": "Cheese-Sandwich.jpg",
      "veg sandwich": "Veg-Sandwich.jpg",
      "sweet corn sandwich": "Sweet-Corn-Sandwich.jpg",
      "masala sandwich": "Masala-Sandwich.jpg",
      "club sandwich": "Club-Sandwich.jpg",
      "paneer tandoori sandwich": "Paneer-Tandoori-Sandwich.jpg",
      "pizza spot special sandwich": "Pizza-Spot-Special-Sandwich.jpg",
      "veg roll": "Veg-Roll.jpg",
      "sweet corn roll": "Sweet-Corn-Roll.jpg",
      "paneer roll": "Paneer-Roll.jpg",
      "egg roll": "Egg-Roll.jpg", 
      "cheese roll": "Cheese-Roll.jpg", 

      // === MOMOS ===
      "steam momos": "Steam-Momos.jpg",
      "fried momos": "Fried-Momos.jpg",
      "kurkure momos": "Kurkure-Momos.jpg",
      "momos": "Fried-Momos.jpg",

      // === FRIES & SIDES ===
      "french fries": "French-Fries.jpg",
      "masala fries": "Masala-Fries.jpg",
      "smiley fries": "Smiley-Fries.jpg",
      "nuggets": "Nuggets.jpg",

      // === PAV BHAJI ===
      "pav bhaji": "Pav-Bhaji.jpg",
      "cheese pav bhaji": "Cheese-Pav-Bhaji.jpg",

      // === CAKES (BAKERY SPECIFIC) ===
      "black forest cake": "Black-Forest.jpg",
      "chocolate truffle cake": "Chocolate-Truffle-Cake.jpg",
      "death by chocolate cake": "Chocolate-Truffle-Cake.jpg",
      "red velvet cake": "Red-Velvet-Cake.JPG",
      "rasmalai cake": "Rasmalai-Cake.jpg",
      "irish coffee cake": "Irish-Coffee-Cake.jpg",
      "american nuts cake": "American-Nuts-Cake.jpg",
      "french vanilla cake": "French-Vanilla-Cake.jpg",
      "pineapple cake": "Pineapple-Cake.jpg",
      "strawberry cake": "Strawberry-Cake.jpg",
      "butterscotch cake": "Butterscotch-Cake.jpg",
      "mango cake": "Mango-Cake.jpg",
      "cake": "Black-Forest.jpg",

      // === SOUTH INDIAN BREAKFAST ===
      "plain dosa": "Plain-Dosa.JPG",
      "masala dosa": "Masala-Dosa.JPG",
      "benne dosa": "Benne-Dosa.jpg",
      "benne masala dosa": "Benne-Masala-Dosa.jpg",
      "mysore masala dosa": "Mysore-Masala-Dosa.jpg",
      "paneer masala dosa": "Paneer-Masala-Dosa.jpg",
      "onion dosa": "onion-dosa.JPG",
      "paneer dosa": "paneer-dosa.JPG",
      "cheese dosa": "chess-dosa.jpg",
      "idli": "Idli.jpg",
      "vada": "Vada.JPG",
      "poori": "poori.JPG",
      "mysore bonda": "Mysore-Bonda.jpg",
      "mangalore buns": "mangalore-buns.JPG",
      "utappa": "utappa.JPG",
      "chou chou bath": "chou-chou-bath.JPG",
      "shira": "shira.JPG",
      "full meals": "full-meals.JPG",

      // === SOUPS ===
      "tomato soup": "Tomato-Soup.jpg",
      "sweet corn soup": "Sweet-Corn-Soup.jpg",
      "hot and sour soup": "Hot-and-Sour-Soup.jpg",
      "veg clear soup": "Veg-Clear-Soup.jpg",
      "soup": "Tomato-Soup.jpg",

      // === CHINESE / STARTERS ===
      "gobi 65": "Gobi-65.jpg",
      "gobi manchurian": "Gobi-Manchurian.jpg",
      "mushroom manchurian": "Mushroom-Manchurian.jpg",
      "paneer manchurian": "Paneer-Manchurian.jpg",
      "veg manchurian": "Veg-Manchurian.jpg",
      "manchurian": "Veg-Manchurian.jpg",
      "chilly": "Paneer-Chilly.jpg",
      "pakoda": "Veg-Pakoda.jpg",
      "roll": "Veg-Spring-Roll.jpg",
      "noodles": "Veg-Noodles-Soup.jpg",
      
      // === RICE / ROTI ===
      "jeera rice": "Jeera-Rice.jpg",
      "veg biryani": "Veg-Biriyani.jpg",
      "kantilal rice": "Kantilal-Rice.jpg",
      "fried rice": "Veg-Fried-Rice.jpg",
      "roti": "Tandoori-Roti.jpg",
      "naan": "Butter-Naan.jpg",
      "kulcha": "Butter-Kulcha.jpg",
      "parota": "Tawa-Parota.jpg",
      "parotha": "Tawa-Parota.jpg",
      "dal": "Dal-Khichadi.jpg",
    };
    
    // Fallback logic for items with long or specific names (like combos)
    function getImagePath(itemName) {
      const key = itemName.toLowerCase().trim().replace(/[^a-z0-9\s]/g, '');
      
      // 1. Check for exact key match (after cleaning)
      if (imageMap[key]) {
        return `images/${imageMap[key]}`;
      }

      // 2. Check for substring matches (e.g., "cheese sandwich" in a combo name)
      for (const mapKey in imageMap) {
        if (key.includes(mapKey)) {
          return `images/${imageMap[mapKey]}`;
        }
      }
      
      // 3. Default placeholder if no specific image is found
      const placeholderText = key.split(' ').slice(0, 3).join('+');
      return `https://via.placeholder.com/600x380/12121b/59FF94?text=${encodeURIComponent(placeholderText)}`;
    }

    // ====================================================================
    // END: Cart and Image Logic
    // ====================================================================

    function renderItems() {
      itemsGrid.innerHTML = "";
      if (shopItems.length === 0) {
        itemsGrid.innerHTML = '<div style="grid-column:1/-1;text-align:center;color:#ff8a8a;padding:40px;font-size:18px;">No items found for this shop. <a href="index.html">Go back</a></div>';
        return;
      }

      shopItems.forEach((item) => {
        const qty = (cart[shopName] && cart[shopName][item.name]) ? cart[shopName][item.name].qty : 0;
        const imgSrc = getImagePath(item.name);

        const card = document.createElement('article');
        card.className = 'item-card';

        // Image Element
        const img = document.createElement('img');
        img.className = 'item-img';
        img.alt = item.name;
        img.loading = 'lazy';
        img.src = imgSrc;
        img.onerror = function() { 
          // Fallback to a cleaner text placeholder on error
          const cleanName = item.name.replace(/[^\w\s]/gi, '').split(' ').slice(0, 3).join(' ');
          this.src = `https://via.placeholder.com/600x380/12121b/59FF94?text=${encodeURIComponent(cleanName.replace(/\s/g, '+'))}`; 
        };

        // Info Container
        const info = document.createElement('div');
        info.className = 'item-info';

        // Name and Description
        const title = document.createElement('div');
        title.className = 'item-name';
        title.textContent = item.name;
        
        const desc = document.createElement('div');
        desc.className = 'item-desc';
        // Logic for description based on item name
        const itemNameLower = item.name.toLowerCase();
        if (itemNameLower.includes("cake")) {
          desc.textContent = "Fresh Cream Cake â€¢ Price per kg";
        } else if (itemNameLower.includes("pizza") || itemNameLower.includes("burger")) {
          desc.textContent = "Signature Dish â€¢ Served Hot";
        } else if (itemNameLower.includes("dosa") || itemNameLower.includes("buns") || itemNameLower.includes("idli")) {
          desc.textContent = "South Indian Special";
        } else if (itemNameLower.includes("rice") || itemNameLower.includes("biryani")) {
          desc.textContent = "Main Course";
        } else {
          desc.textContent = "Fresh â€¢ Bakery Special";
        }
        
        // Price
        const price = document.createElement('div');
        price.className = 'item-price';
        price.textContent = itemNameLower.includes("cake") && !itemNameLower.includes("cup cake") ? `â‚¹${item.price}/kg` : `â‚¹${item.price}`;
        
        // Quantity Controls
        const controls = document.createElement('div');
        controls.className = 'quantity';

        if (isLoggedIn) {
          const btnMinus = document.createElement('button');
          btnMinus.className = 'qbtn';
          btnMinus.innerHTML = 'âˆ’';
          btnMinus.title = `Remove one ${item.name}`;
          btnMinus.onclick = () => changeQty(shopName, item.name, item.price, -1);

          const qtyEl = document.createElement('div');
          qtyEl.className = 'qty';
          qtyEl.textContent = qty;

          const btnPlus = document.createElement('button');
          btnPlus.className = 'qbtn';
          btnPlus.innerHTML = '+';
          btnPlus.title = `Add one ${item.name}`;
          btnPlus.onclick = () => changeQty(shopName, item.name, item.price, +1);

          controls.append(btnMinus, qtyEl, btnPlus);
        } else {
          // Alternative button for logged out users
          const loginHint = document.createElement('button');
          loginHint.className = 'checkout-btn'; 
          loginHint.style.width = '100%';
          loginHint.textContent = 'Login to Add';
          loginHint.onclick = () => alert("Please login to add items to cart.");
          controls.append(loginHint);
        }

        info.append(title, desc, price, controls);
        card.append(img, info);
        itemsGrid.appendChild(card);
      });
    }

    // ====================================================================
    // START: Initialisation and Event Listeners
    // ====================================================================

    function initializePage() {
      if (shopName) {
        shopNameEl.textContent = shopName;
        renderItems();
        updateCartBar();
      } else {
        shopNameEl.textContent = "Shop Not Found";
        itemsGrid.innerHTML = '<div class="center">Please select a valid shop. <a href="index.html">Go to Shop List</a></div>';
        cartBar.style.display = 'none';
      }
    }

    // Event Listeners
    backBtn.addEventListener('click', () => {
        window.location.href = 'index.html'; // Assuming this is the shop list page
    });

    // Cart Bar/Checkout Buttons
    checkoutBtn.addEventListener('click', openCartPage);
    cartBar.addEventListener('click', (e) => {
        // Only open cart if the click wasn't on the specific checkout button
        if (e.target !== checkoutBtn) {
            openCartPage();
        }
    });

    // Initial load
    initializePage();
    // ====================================================================
    // END: Initialisation and Event Listeners
    // ====================================================================

  </script>
</body>
</html>
