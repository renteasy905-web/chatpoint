<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Chat Point | Food Shops</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="icon-192.png" type="image/png" />
  <meta name="theme-color" content="#FFD700" />
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <style>
    :root{
      --bg: #fffaf2; --card: #ffffff; --text: #111111; --muted: #6b6b6b;
      --primary: #75d133d5; --accent: #036487; --shadow: rgba(17,17,17,0.06);
      --glass-border: rgba(255,165,0,0.08);
    }
    *{box-sizing:border-box;margin:0;padding:0;font-family:"Outfit",system-ui}
    html,body{height:100%}
    body{background:linear-gradient(180deg,var(--bg),#fff6da 120px);color:var(--text);min-height:100vh;overflow-x:hidden}
    
    .floating-icons{position:fixed;inset:0;pointer-events:none;z-index:0;overflow:hidden}
    .float-svg{position:absolute;opacity:0.1;animation:gentleFloat 9s ease-in-out infinite}
    .float-1{left:6%;top:12%;width:88px}.float-2{right:6%;bottom:8%;width:110px;opacity:0.12}
    .float-3{left:50%;top:40%;width:120px;transform:translateX(-50%) rotate(-8deg)}.float-4{left:8%;bottom:20%;width:72px;opacity:0.08}
    @keyframes gentleFloat{0%,100%{transform:translateY(0) rotate(0deg)}50%{transform:translateY(-18px) rotate(6deg)}}

    header{position:sticky;top:0;z-index:120;display:flex;align-items:center;gap:12px;padding:14px 18px;background:var(--primary);box-shadow:0 6px 18px var(--shadow);}
    .nav-btn{width:46px;height:46px;border-radius:12px;background:rgba(255,255,255,0.6);display:grid;place-items:center;cursor:pointer;border:1px solid rgba(0,0,0,0.04)}
    .brand{font-weight:800;font-size:20px;color:#111;display:flex;gap:6px;align-items:center}
    .brand span{color:var(--accent);font-weight:900}
    .header-right{margin-left:auto;display:flex;gap:10px;align-items:center}

    /* Cart & Bell Buttons - Same Style */
    .cart-btn, .bell-btn{
      background:var(--accent);color:white;padding:10px 14px;border-radius:12px;font-weight:700;
      cursor:pointer;box-shadow:0 6px 18px rgba(255,59,48,0.3);display:flex;align-items:center;gap:6px;
    }
    .bell-btn{width:46px;height:46px;padding:0;justify-content:center;position:relative;}
    .bell-btn .badge{
      position:absolute;top:-6px;right:-6px;background:#ff3b30;color:white;width:18px;height:18px;
      border-radius:50%;font-size:10px;font-weight:800;display:grid;place-items:center;
    }

    .sidebar{position:fixed;left:-100%;top:0;width:320px;height:100%;z-index:220;background:linear-gradient(180deg,#fff,#fff9e6);padding:18px;box-shadow:6px 20px 60px rgba(0,0,0,0.12);transition:left .32s ease}
    .sidebar.active{left:0}
    .profile-section{background:linear-gradient(180deg,#fff,#fff9db);border-radius:12px;padding:14px;border:1px solid var(--glass-border);display:flex;gap:12px;align-items:center}
    .profile-section .avatar{width:56px;height:56px;border-radius:12px;background:linear-gradient(90deg,#fff7c2,#fff2a8);display:flex;align-items:center;justify-content:center;font-size:28px;color:var(--primary)}
    .overlay{position:fixed;inset:0;background:rgba(0,0,0,0.45);z-index:210;display:none}
    .overlay.active{display:block}

    main{max-width:1180px;margin:22px auto;padding:0 18px;position:relative;z-index:2}
    .offer-slider{max-width:860px;margin:0 auto 20px;border-radius:16px;overflow:hidden;border:1px solid rgba(255,59,48,0.15);box-shadow:0 20px 50px rgba(0,0,0,0.06)}
    .slides{display:flex;width:400%;animation:slide 18s infinite linear}
    .slide{min-width:100%;height:190px;background-size:cover;background-position:center;display:flex;align-items:center;justify-content:center;position:relative;padding:22px;text-decoration:none}
    .slide::after{content:"";position:absolute;inset:0;background:linear-gradient(90deg,rgba(255,215,0,0.22),rgba(255,59,48,0.12));mix-blend-mode:multiply}
    .slide .label{position:relative;z-index:2;background:var(--accent);color:white;padding:12px 18px;border-radius:999px;font-weight:800;border:1px solid rgba(255,255,255,0.4);box-shadow:0 8px 30px rgba(255,59,48,0.4);}
    @keyframes slide{0%{transform:translateX(0%)}24%{transform:translateX(0%)}28%{transform:translateX(-100%)}52%{transform:translateX(-100%)}56%{transform:translateX(-200%)}80%{transform:translateX(-200%)}84%{transform:translateX(-300%)}100%{transform:translateX(-300%)}}

    .tab-switch{display:flex;gap:12px;max-width:860px;margin:18px auto;justify-content:center}
    .tab-btn{flex:1;padding:12px 16px;border-radius:999px;font-weight:800;border:1px solid rgba(17,17,17,0.04);display:flex;align-items:center;justify-content:center;text-decoration:none}
    .tab-btn.food{background:linear-gradient(90deg,var(--primary),#ffd800);color:#111;box-shadow:0 4px 10px rgba(255,215,0,0.2)}
    .tab-btn.grocery{background:#fff;color:#111}
    .tab-btn.inactive{opacity:0.6;background:#f7f7f7 !important;box-shadow:none}

    .search-bar{max-width:860px;margin:12px auto 20px;position:relative}
    .search-bar input{width:100%;padding:14px 46px 14px 18px;border-radius:999px;border:1px solid rgba(0,0,0,0.06);background:white;font-size:15px}
    .search-bar input:focus{outline:none;box-shadow:0 12px 30px rgba(255,215,0,0.2)}
    .search-bar .icon{position:absolute;right:14px;top:50%;transform:translateY(-50%);color:var(--accent);font-size:16px}

    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:18px}
    .card-wrap{position:relative}
    .card{background:var(--card);border-radius:14px;overflow:hidden;cursor:pointer;transition:transform .28s,box-shadow .28s;border:1px solid rgba(0,0,0,0.04);box-shadow:0 4px 12px var(--shadow)}
    .card:hover{transform:translateY(-5px);box-shadow:0 30px 60px rgba(0,0,0,0.08)}
    .card img{width:100%;height:160px;object-fit:cover}
    .info{padding:12px 14px;display:flex;justify-content:space-between;align-items:center}
    .shop-name{font-weight:800;font-size:17px}
    .rating{background:linear-gradient(90deg,#fffaf0,#fff6da);padding:6px 12px;border-radius:999px;font-weight:700;display:flex;align-items:center;gap:6px;color:var(--accent)}
    .desc{padding:0 14px 12px;color:var(--muted);font-size:14px}
    .items-row{display:flex;flex-wrap:wrap;gap:8px;padding:0 14px 18px}
    .item-pill{background:#fff6db;padding:6px 10px;border-radius:999px;font-size:12px;font-weight:700}
    .badge-offer{position:absolute;top:12px;left:12px;background:var(--accent);color:white;padding:8px 12px;border-radius:8px;font-weight:800;font-size:13px}

    footer{padding:18px;text-align:center;color:var(--muted);margin-top:36px}
    @media (max-width:640px){
      header{padding:12px}.brand{font-size:18px}
      .cart-btn,.bell-btn{font-size:14px;padding:8px 12px}
      .bell-btn{width:42px;height:42px}
    }
  </style>
</head>
<body>

  <!-- Floating Icons - SAME -->
  <div class="floating-icons" aria-hidden="true">
    <svg class="float-svg float-1" viewBox="0 0 64 64"><g fill="none"><path d="M32 2C18 2 6.5 10 2 22c5 10 20 28 30 40 10-12 25-30 30-40C57.5 10 46 2 32 2z" fill="#FFEAA7"/><circle cx="26" cy="34" r="3" fill="#FF8A65"/><circle cx="36" cy="28" r="2.5" fill="#FF8A65"/></g></svg>
    <svg class="float-svg float-2" viewBox="0 0 64 64"><rect x="4" y="22" width="56" height="20" rx="10" fill="#FFD54A"/><path d="M6 26h52v8H6z" fill="#D84315"/></svg>
    <svg class="float-svg float-3" viewBox="0 0 64 64"><path d="M32 10c7 0 12 6 12 11 0 4-3 7-6 9-1 1-6 3-6 3s-5-2-6-3c-3-2-6-5-6-9 0-5 5-11 12-11z" fill="#FFF3E0"/><path d="M28 36l-6 14c.8.6 1.9 1 3 1h8c1.1 0 2.2-.4 3-1l-6-14z" fill="#FFB74D"/></svg>
    <svg class="float-svg float-4" viewBox="0 0 64 64"><path d="M12 16h28v22H12z" fill="#FFF8E1"/><path d="M40 22h6a8 8 0 110 16h-6z" fill="#FFD54A"/></svg>
  </div>

  <!-- Header with Bell + Cart -->
  <header>
    <button id="navBtn" class="nav-btn" aria-label="Open menu">
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none"><path d="M4 7h16M4 12h16M4 17h16" stroke="#111" stroke-width="1.6" stroke-linecap="round"/></svg>
    </button>

    <div class="brand">Chat<span style="color:var(--accent)">Point</span></div>

    <div class="header-right">
      <!-- Bell Icon -->
      <button class="bell-btn" onclick="location.href='notification.html'" aria-label="Notifications">
        <i class="fas fa-bell"></i>
       
      </button>

      <!-- Cart Button -->
      <button class="cart-btn" onclick="location.href='cart.html'">
        Cart
      </button>
    </div>
  </header>

  <!-- Sidebar (unchanged) -->
  <aside id="sidebar" class="sidebar">
    <div class="profile-section" id="profileSection">
      <div class="avatar">User</div>
      <div class="meta">Welcome<div style="font-size:13px;color:var(--muted)">Sign in for offers</div></div>
    </div>
    <nav style="margin-top:14px">
      <a href="orders.html">My Orders</a>
      <a href="tel:8088975913">Contact: 8088975913</a>
      <a href="notification.html">Notifications</a>
      <a href="#" id="logout" style="display:none;color:var(--accent)">Logout</a>
    </nav>
    <div style="margin-top:auto;padding-top:18px;font-size:13px;color:var(--muted)">© 2025 Chat Point</div>
  </aside>
  <div id="overlay" class="overlay"></div>

  <!-- Rest of your page (offer slider, tabs, search, grid) - SAME AS BEFORE -->
  <main>
    <section class="offer-slider">
      <div class="slides">
        <a href="#" class="slide" style="background-image:url('https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=1200')"><div class="label">FREE DELIVERY above ₹50!</div></a>
        <a href="#" class="slide" style="background-image:url('https://images.unsplash.com/photo-1606787366850-de6330127bfc?w=1200')"><div class="label">Combo ₹200 — VIEW DEAL</div></a>
        <a href="#" class="slide" style="background-image:url('https://images.unsplash.com/photo-1513104890138-7c749659a0ae38?w=1200')"><div class="label">FREE Drink on ₹200+</div></a>
        <a href="#" class="slide" style="background-image:url('https://images.unsplash.com/photo-1555939594-58d7cb561ad1?w=1200')"><div class="label">BOGO @ Fly Pizza</div></a>
      </div>
    </section>

    <div class="tab-switch">
      <a href="index.html" class="tab-btn food">Food</a>
      <a href="grocery.html" class="tab-btn grocery inactive">Grocery</a>
    </div>

    <div class="search-bar">
      <input type="text" id="searchInput" placeholder="Search your favorite shop..." oninput="searchShops()">
      <i class="fas fa-search icon"></i>
    </div>

    <section class="grid" id="grid"></section>
  </main>

  <footer>© 2025 Chat Point • Made with Passion</footer>

  <!-- Same script as before but with shops from database -->
  <script>
    const API = "";

    async function loadShops() {
      try {
        const res = await fetch(API + "/api/shops");
        const data = await res.json();
        if (data.success && data.shops.length > 0) renderShops(data.shops);
        else document.getElementById("grid").innerHTML = "<p style='text-align:center;padding:60px;color:#888'>No shops yet!</p>";
      } catch { /* ignore */ }
    }

    function renderShops(shops) {
      const grid = document.getElementById("grid");
      grid.innerHTML = "";
      shops.forEach(shop => {
        const wrap = document.createElement("div"); wrap.className = "card-wrap";
        const card = document.createElement("div"); card.className = "card";
        card.onclick = () => {
          localStorage.setItem("currentShop", JSON.stringify(shop));
          location.href = `items.html?shop=${encodeURIComponent(shop.shopName)}`;
        };

        const img = document.createElement("img");
        img.src = shop.imageUrl?.[0] || `https://via.placeholder.com/420x260/FFD700/333?text=${shop.shopName}`;
        img.alt = shop.shopName;

        const badge = document.createElement("div"); badge.className = "badge-offer"; badge.textContent = "NEW";

        const info = document.createElement("div"); info.className = "info";
        info.innerHTML = `<div class="shop-name">${shop.shopName}</div><div class="rating"><i class="fas fa-star"></i> 4.8+</div>`;

        const desc = document.createElement("div"); desc.className = "desc";
        desc.textContent = shop.ownerName ? `${shop.ownerName}'s Outlet` : "Fast Delivery";

        const itemsRow = document.createElement("div"); itemsRow.className = "items-row";
        shop.items.slice(0,4).forEach(i => {
          const p = document.createElement("div"); p.className = "item-pill"; p.textContent = i.name; itemsRow.appendChild(p);
        });

        card.append(img, info, desc, itemsRow);
        wrap.append(card, badge);
        grid.appendChild(wrap);
      });
    }

    function searchShops() {
      const term = document.getElementById("searchInput").value.toLowerCase();
      document.querySelectorAll(".card-wrap").forEach(w => {
        const name = w.querySelector(".shop-name")?.textContent.toLowerCase() || "";
        w.style.display = name.includes(term) ? "" : "none";
      });
    }

    // Sidebar
    document.getElementById("navBtn").onclick = () => {
      document.getElementById("sidebar").classList.add("active");
      document.getElementById("overlay").classList.add("active");
    };
    document.getElementById("overlay").onclick = () => {
      document.getElementById("sidebar").classList.remove("active");
      document.getElementById("overlay").classList.remove("active");
    };

    // Profile
    const user = JSON.parse(localStorage.getItem("chatpoint_user") || "null");
    if (user) {
      document.getElementById("profileSection").innerHTML = `<div style="display:flex;gap:12px;align-items:center">
        <div class="avatar"><i class="fas fa-user"></i></div>
        <div><div style="font-weight:800">${user.name}</div>
        <div style="font-size:13px;color:var(--muted)">${user.phone}</div></div></div>`;
      document.getElementById("logout").style.display = "block";
      document.getElementById("logout").onclick = () => { localStorage.removeItem("chatpoint_user"); location.reload(); };
    }

    loadShops();
  </script>
</body>
</html>
